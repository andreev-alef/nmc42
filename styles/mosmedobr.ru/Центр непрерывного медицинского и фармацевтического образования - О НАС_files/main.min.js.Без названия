function Money(e,t,n){function r(e){var t=Math.abs(e-Math.floor(e))>.009;return t?Globalize.format(e,"n2"):Globalize.format(e,"n0")}var o=this;o.amount=e,o.code=t,o.position=n,o.toString=function(){if(0==o.amount)return 0;if(1==o.position)return o.code+r(o.amount);if(2==o.position)return r(o.amount)+" "+o.code;throw new Error("Unknown symbol position "+o.position)},o.toHtmlString=function(){if(0==o.amount)return'<span class="money"><span class="amount">0</span></span>';if(1==o.position)return'<span class="money"><span class="currency">'+o.code+'</span> <span class="amount">'+r(o.amount)+"</span></span>";if(2==o.position)return'<span class="money"><span class="amount">'+r(o.amount)+'</span> <span class="currency">'+o.code+"</span></span>";throw new Error("Unknown symbol position "+o.position)}}function WebstoreProduct(e,t,n,r,o,i,a){var s=this;s.id=e,s.name=t,s.price=o,s.url=n,s.priceExt=i,s.image=r,s.variants=a,s.hasImage=ko.computed(function(){return""!=s.image})}function WebstoreProductVariant(e,t,n){var r=this;r.id=e,r.price=t,r.optionValues=n,r.isNull=ko.computed(function(){return""==r.id})}function WebstoreProductOptionValue(e,t,n){var r=this;r.id=e,r.name=t,r.option=n}function WebstoreProductOption(e,t){var n=this;n.id=e,n.name=t}function ShoppingCartLine(e,t,n,r,o,i){var a=this;a.id=e,a.product=t,a.quantity=ko.observable(n),a.editedQuantity=ko.observable(n),a.variant=o,a.price=r,a.isRemoved=ko.observable(i),a.total=ko.computed(function(){var e=a.quantity();return 0>e&&(e=0),new Money(e*a.price.amount,a.price.code,a.price.position)})}function ShoppingCartModel(){var e=this;e.cartLines=ko.observableArray([]),e.total=ko.computed(function(){if(0==e.cartLines().length)return new Money(0,"",0);for(var t=e.cartLines()[0].total(),n=new Money(0,t.code,t.position),r=0;r<e.cartLines().length;r++)e.cartLines()[r].isRemoved()||(n.amount+=e.cartLines()[r].total().amount);return n}),e.itemsCount=ko.computed(function(){for(var t=0,n=0;n<e.cartLines().length;n++)e.cartLines()[n].isRemoved()||(t+=1*e.cartLines()[n].quantity());return t}),e.itemsCount.subscribe(function(){e.isModified=!0}),e.isCartEmpty=ko.computed(function(){for(var t=0,n=0;n<e.cartLines().length;n++)e.cartLines()[n].isRemoved()||t++;return 0==t}),e.hasItems=ko.computed(function(){return e.cartLines().length>0}),e.quantityChanged=function(t){window.isValidQuantity(t)&&e.cartLines()[t].quantity(e.cartLines()[t].editedQuantity()),0==e.cartLines()[t].quantity()&&e.itemDelete(e.cartLines()[t])},e.itemDelete=function(e){e.isRemoved(!0)},e.itemRestore=function(e){e.isRemoved(!1),0==e.editedQuantity()&&(e.quantity(1),e.editedQuantity(1))},e.saveCartTitle=ko.observable("Сохранить изменения"),e.cartJson=ko.computed(function(){var t={};t.lines=[];for(var n=0;n<e.cartLines().length;n++){var r=e.cartLines()[n];if(!r.isRemoved()){var o={};o.id=r.id,o.productID=r.product.id,o.variantID=r.variant?r.variant.id:null,o.quantity=r.quantity(),t.lines.push(o)}}return JSON.stringify(t)});var t;e.isModified=!1,e.showCartLinesError=ko.observable(!1),e.saveCart=function(n){if(window.validateShoppingCart()){if(e.showCartLinesError(!1),!e.isModified)return;clearTimeout(t),e.saveCartTitle("Сохраняем...");var r={};r.lines=[];for(var o=0;o<e.cartLines().length;o++){var i=e.cartLines()[o];if(!i.isRemoved()){var a={};a.id=i.id,a.productID=i.product.id,a.variantID=i.variant?i.variant.id:null,a.quantity=i.quantity(),r.lines.push(a)}}var s=JSON.stringify(r);$.post("/shoppingcart/save",{model:s},function(r,o){r.sucessful&&n&&n(),r.successful&&(e.isModified=!1,e.saveCartTitle("Сохранено!"),t=setTimeout(function(){e.saveCartTitle("Сохранить изменения")},3e3))})}else e.showCartLinesError(!0)},function(){var t=window.ShoppingCartObject;if(t&&t.products){e.cartLines.removeAll();for(var n=0;n<t.products.length;n++){var r=t.products[n],o=new Money(r.price.amount,r.price.currency,r.price.pos),i=new WebstoreProduct(r.productID,r.name,r.url,r.image,o,r.priceExtension,[]),a=null;if(r.variant){for(var s=new Money(r.variant.price.amount,r.variant.price.currency,r.variant.price.pos),u=[],l=0;l<r.variant.values.length;l++){var c=r.variant.values[l],d=new WebstoreProductOption(c.optionID,c.optionName),p=new WebstoreProductOptionValue(c.id,c.name,d);u.push(p)}a=new WebstoreProductVariant(r.variant.id,s,u)}var f=new ShoppingCartLine(r.entryID,i,r.quantity,o,a,r.isRemoved);e.cartLines.push(f)}e.isModified=!1}}()}function ShippingMethod(e,t,n,r,o,i,a){var s=this;s.name=e,s.methodType=r,s.currencySymbol=n,s.comment=t,s.fixedCost=o,s.intervals=i,s.areas=a,s.areaID=ko.observable(),a.length>0&&s.areaID(a[0].id);for(var u=0;u<s.areas.length;u++){var l=s.areas[u];l.label=l.name+" - "+l.price+" "+s.currencySymbol}s.shippingCost=ko.computed(function(){if("fixed"==s.methodType)return s.fixedCost;if("interval"==s.methodType){for(var e=1*shoppingCartModel.total().amount,t=0;t<s.intervals.length;t++)if(e>=s.intervals[t].min&&e<s.intervals[t].max)return s.intervals[t].price;throw new Error("Cannot calculate shipping cost for interval method "+s.name+". Total is "+e)}if("area"==s.methodType){var n=s.areaID();if(!n)return"";for(var r=0;r<s.areas.length;r++)if(s.areas[r].id==n)return s.areas[r].price;throw new Error("Area with id = "+n+" is not found")}return 0}),s.shippingCostText=ko.computed(function(){switch(s.methodType){case"free":return"бесплатно";case"offlineCalculation":return"Стоимость доставки будет определена после размещения заказа"}var e=s.shippingCost();return e+" "+s.currencySymbol})}function OrderingModel(e){var t=this;t.shoppingCart=e;for(var n=0;n<t.shoppingCart.cartLines().length;n++){var r=t.shoppingCart.cartLines()[n];r.editedQuantity.extend({digit:{message:"Количество товара должно целым и не меньше нуля"}}).extend({required:{message:"Введите количество товара"}})}t.orderFormVisible=ko.observable(!1),t.hadItems=e.hasItems(),t.shippingMethods=ko.observableArray(),t.selectedIndex=ko.observable(null).extend({required:{message:"Выберите способ доставки",onlyIf:function(){return 0!=t.shippingMethods().length}}}),t.currencySymbol="",t.showOrderForm=function(){if(t.shoppingCart.saveCart(),!t.shoppingCart.showCartLinesError()){t.orderFormVisible(!0);var e=$(".order-form").offset().top;$("body").animate({scrollTop:e},700),$(".order-form-explicit input").eq(0).focus()}},t.hideOrderForm=function(){t.orderFormVisible(!1)},t.shippingJson=ko.computed(function(){var e={},n=t.shippingMethods(),r=t.selectedIndex();if(n.length>0&&"number"==typeof r&&r>=0){e.method=r;var o=n[r];"area"===o.methodType&&(e.area=o.areaID())}return JSON.stringify(e)}),function(){if(shippingMethodsData){var e=shippingMethodsData;if(t.currencySymbol=e.currencySymbol,e.orderFormVisible){t.orderFormVisible(!0);var n=$(".order-form").offset().top;$("body").animate({scrollTop:n},700),$(".order-form-explicit input").eq(0).focus()}for(var r=0;r<e.methods.length;r++){var o=e.methods[r],i=new ShippingMethod(o.name,o.comment,t.currencySymbol,o.methodType,o.fixedCost,o.intervals,o.areas);t.shippingMethods.push(i)}var a=!0;t.updater=ko.computed(function(){if(a){for(var e=t.shoppingCart.itemsCount(),n=t.shoppingCart.cartLines(),r=0;r<n.length;r++)e=n[r].quantity();return void(a=!1)}t.shoppingCart.saveCart()}).extend({rateLimit:{timeout:1e3,method:"notifyWhenChangesStop"}})}}()}function WebsiteProductLine(e,t,n,r,o,i){var a=this;a.commerceModel=e,a.product=t,a.productID=t.id,a.shortDescription=r,a.oldPrice=o,a.successfullyAdded=ko.observable(!1);var s=[],u=function(){for(var e=0,t=a.commerceModel.shoppingCart.cartLines(),n=0;n<t.length;n++){var r=t[n];r.product.id==a.productID&&(e+=r.quantity())}return e};a.quantity=ko.computed(function(){for(var e=0;e<s.length;e++)s[e].dispose();for(var t=a.commerceModel.shoppingCart.cartLines(),e=0;e<t.length;e++){var n=t[e];n.product.id==a.productID&&s.push(n.quantity.subscribe(u))}return u()}),a.options=i,a.variants=t.variants,a.setOptionsProductLine=function(e){e&&a.options(e);for(var t=0;t<a.options.length;t++)a.options[t].productLine=a},a.setOptionsProductLine(),a.selectedOptionValues=ko.observable([]),a.selectedVariant=ko.observable(null),a.price=ko.computed(function(){var e=a.selectedVariant();return e?e.price:a.product.price}),a.addQuantity=ko.observable("1"),a.addToCartEnable=ko.computed(function(){return(0===a.options.length||a.selectedVariant())&&a.price().amount>0}),a.addToCart=function(){if(!a.addToCartEnable()){for(var e="",n=0;n<a.options.length;n++){var r=a.options[n].name;n>0&&(e+=n==a.options.length-1?" и ":", "),e+=r}return void alert("Выберите пожалуйста "+e+" для добавления товара в корзину")}var o=1,i=/^\d{1,6}$/.test(a.addQuantity());if(i&&(o=parseInt(a.addQuantity()),i=o>0),!i)return void alert("Количество должно быть целым числом.");for(var s=a.commerceModel.shoppingCart.cartLines(),u=a.selectedVariant(),l=null,c=0;c<s.length;c++){var d=s[c];(!d.variant&&!u&&t.id==d.id||d.variant&&u&&d.variant.id==u.id)&&(l=d)}l||(l=new ShoppingCartLine(null,t,0,a.price(),u),a.commerceModel.shoppingCart.cartLines.push(l));var p=l.quantity(),f=p+o;l.quantity(f),a.addQuantity(1),$.ajax({dataType:"json",url:"/shoppingcart/modifyproduct",type:"POST",data:{productID:l.product.id,productVariantID:u?u.id:null,quantity:o},error:function(e,t,n){l.quantity(l.quantity()-o),alert("При добавлении товара произошла ошибка. Попробуйте добавить товар ещё раз.")}}),$(".item-bought-tooltip").hide(),a.successfullyAdded(!0),a.successfullyAdded.valueHasMutated()}}function WebsiteProductLineOption(e,t,n){var r=this;r.id=e,r.name=t,r.productLine=null,r.values=n,r.setValuesOption=function(){for(var e=0;e<r.values.length;e++)n[e].option=r},r.setValuesOption(),r._selectedValue=null,r.selectedValue=ko.computed({read:function(){return r._selectedValue},write:function(e){if(r._selectedValue!=e){r._selectedValue=e?e:null;var t=r.productLine.options,n=r.productLine.variants,o=[];ko.utils.arrayForEach(t,function(e){var t=e._selectedValue;t&&o.push(t)});for(var i=0;i<t.length;i++){for(var a=t[i],s=[],u=0;u<o.length;u++){var l=o[u];l.option!=a&&s.push(l)}var c;if(s.length>0){c=[];for(var u=0;u<n.length;u++){var d=!0,p=n[u].optionValues,f=ko.utils.arrayFirst(p,function(e){return e.option==a});if(f){for(var m=0;m<s.length;m++){var h=s[m],g=ko.utils.arrayFirst(p,function(e){return e==h});if(!g){d=!1;break}}d&&c.push(f)}}c=ko.utils.arrayGetDistinctValues(c)}else c=a.values;for(var u=0;u<a.values.length;u++){var f=a.values[u],g=ko.utils.arrayFirst(c,function(e){return e==f});f.enabled(null!=g)}}if(0==o.length||o.length!=t.length)r.productLine.selectedVariant(null);else{var v=ko.utils.arrayFirst(n,function(e){return CompareArrays(e.optionValues,o)});v&&r.productLine.selectedVariant(v)}}},owner:r}),r.setOptionValueEnable=function(e,t){t&&ko.applyBindingsToNode(e,{enable:t.enabled},t)}}function WebsiteProductLineOptionValue(e,t){var n=this;n.id=e,n.name=t,n.enabled=ko.observable(!0)}function CommerceModel(e,t){var n=this;n.shoppingCart=e,n.productLines=ko.observableArray(t||[]),n.parseJSON=function(e){for(var t={},r=0;r<e.options.length;r++)for(var o=e.options[r],i=0;i<o.values.length;i++){var a=o.values[i];a.option=o,t[a.id]=a}for(var r=0;r<e.products.length;r++)for(var s=e.products[r],i=0;i<s.variants.length;i++){var u=s.variants[i];u.values=ko.utils.arrayMap(u.values,function(e){return t[e]})}var l=n.productLines();ko.utils.arrayForEach(e.products,function(e){for(var t=0;t<l.length;t++)if(l[t].productID==e.id)return;var r=new Money(e.price.amount,e.price.currency,e.price.pos),o=e.oldPrice?new Money(e.oldPrice.amount,e.oldPrice.currency,e.oldPrice.pos):null,i=0,a=ko.utils.arrayGetDistinctValues(SelectMany(e.variants,function(e){return e.values})),s=ko.utils.arrayGetDistinctValues(ko.utils.arrayMap(a,function(e){return e.option})),u=[],c=ko.utils.arrayMap(s,function(e){for(var t=[],n=0;n<a.length;n++){var r=a[n];if(r.option==e){var o=new WebsiteProductLineOptionValue(r.id,r.name);t.push(o),u.push(o)}}return new WebsiteProductLineOption(e.id,e.name,t)}),d=ko.utils.arrayMap(e.variants,function(e){var t=ko.utils.arrayMap(e.values,function(e){return ko.utils.arrayFirst(u,function(t){return e.id==t.id})}),n=new Money(e.price.amount,e.price.currency,e.price.pos);return new WebstoreProductVariant(e.id,n,t)}),p=new WebstoreProduct(e.id,e.name,e.url,e.image,r,e.priceExtension,d),f=new WebsiteProductLine(n,p,i,e.shortDescription,o,c);n.productLines.push(f)})}}function SelectMany(e,t){for(var n=[],r=0;r<e.length;r++)for(var o=t(e[r]),i=0;i<o.length;i++)n.push(o[i]);return n}function CompareArrays(e,t){if(e.length!=t.length)return!1;if(0==e.length)return!0;t=t.slice(0);for(var n=0;n<e.length;n++){for(var r=!0,o=0;o<t.length;o++)if(e[n]==t[o]){r=!1,t.slice(o,1);break}if(r)return!1}return!0}JavascriptLocalization={PaymentsAcceptor:{AmountAfterLogging:"После попадания в платежную систему вы должны будете оплатить",Quantity:"Количество",StartingPrice:"Начальная цена",Total:"Итого"},Errors:{CommentSubmitting:"При отправке комментария возникла ошибка. Попробуйте обновить страницу и отправить комментарий еще раз, если проблема будет повторяться, обратитесь к администратору сайта.",FormSubmitting:"При отправке формы возникла ошибка. Попробуйте обновить страницу и заполнить форму еще раз, если проблема будет повторяться, обратитесь к администратору сайта."},FineUploader:{Cancel:"cancel",EmptyError:"Файл {file} пуст, пожалуйста выберите другой файл.",FailUpload:"Ошибка загрузки файла",FormatProgress:"{percent}% из {total_size}",MinSizeError:"Размер файла {file} слишком мал, минимальный размер файла - {minSizeLimit}.",OnLeave:"В данный момент загружаются файлы, уход со страницы остановит загрузку.",Retry:"retry",SizeByte12:"ТБ",SizeByte15:"ПБ",SizeByte18:"ЭБ",SizeByte3:"КБ",SizeByte6:"МБ",SizeByte9:"ГБ",SizeError:"Размер файла {file} слишком велик , максимальный размер файла - {sizeLimit}.",TypeError:"Неверное расширение файла {file}. Поддерживаются только расширения {extensions}.",Upload:"Upload a file",WaitingForResponse:"Обработка..."},Forms:{Quantity:"Количество"}},function(e){e.fn.hoverIntent=function(t,n,r){var o={interval:100,sensitivity:7,timeout:0};o="object"==typeof t?e.extend(o,t):e.isFunction(n)?e.extend(o,{over:t,out:n,selector:r}):e.extend(o,{over:t,out:t,selector:n});var i,a,s,u,l=function(e){i=e.pageX,a=e.pageY},c=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(s-i)+Math.abs(u-a)<o.sensitivity?(e(n).off("mousemove.hoverIntent",l),n.hoverIntent_s=1,o.over.apply(n,[t])):(s=i,u=a,n.hoverIntent_t=setTimeout(function(){c(t,n)},o.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,o.out.apply(t,[e])},p=function(t){var n=jQuery.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"==t.type?(s=n.pageX,u=n.pageY,e(r).on("mousemove.hoverIntent",l),1!=r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){c(n,r)},o.interval))):(e(r).off("mousemove.hoverIntent",l),1==r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){d(n,r)},o.timeout)))};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},o.selector)}}(jQuery),function(e){"use strict";var t=function(){var t={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},n=function(){var t=/iPhone|iPad|iPod/i.test(navigator.userAgent);return t&&e(window).load(function(){e("body").children().on("click",e.noop)}),t}(),r=function(){var e=document.documentElement.style;return"behavior"in e&&"fill"in e&&/iemobile/i.test(navigator.userAgent)}(),o=function(e,n){var r=t.menuClass;n.cssArrows&&(r+=" "+t.menuArrowClass),e.toggleClass(r)},i=function(n,r){return n.find("li."+r.pathClass).slice(0,r.pathLevels).addClass(r.hoverClass+" "+t.bcClass).filter(function(){return e(this).children(r.popUpSelector).hide().show().length}).removeClass(r.pathClass)},a=function(e){e.children("a").toggleClass(t.anchorClass)},s=function(e){var t=e.css("ms-touch-action");t="pan-y"===t?"auto":"pan-y",e.css("ms-touch-action",t)},u=function(t,o){var i="li:has("+o.popUpSelector+")";e.fn.hoverIntent&&!o.disableHI?t.hoverIntent(c,d,i):t.on("mouseenter.superfish",i,c).on("mouseleave.superfish",i,d);var a="MSPointerDown.superfish";n||(a+=" touchend.superfish"),r&&(a+=" mousedown.superfish"),t.on("focusin.superfish","li",c).on("focusout.superfish","li",d).on(a,"a",o,l)},l=function(t){var n=e(this),r=n.siblings(t.data.popUpSelector);r.length>0&&r.is(":hidden")&&(n.one("click.superfish",!1),"MSPointerDown"===t.type?n.trigger("focus"):e.proxy(c,n.parent("li"))())},c=function(){var t=e(this),n=m(t);clearTimeout(n.sfTimer),t.siblings().superfish("hide").end().superfish("show")},d=function(){var t=e(this),r=m(t);n?e.proxy(p,t,r)():(clearTimeout(r.sfTimer),r.sfTimer=setTimeout(e.proxy(p,t,r),r.delay))},p=function(t){t.retainPath=e.inArray(this[0],t.$path)>-1,this.superfish("hide"),this.parents("."+t.hoverClass).length||(t.onIdle.call(f(this)),t.$path.length&&e.proxy(c,t.$path)())},f=function(e){return e.closest("."+t.menuClass)},m=function(e){return f(e).data("sf-options")};return{hide:function(t){if(this.length){var n=this,r=m(n);if(!r)return this;var o=r.retainPath===!0?r.$path:"",i=n.find("li."+r.hoverClass).add(this).not(o).removeClass(r.hoverClass).children(r.popUpSelector),a=r.speedOut;t&&(i.show(),a=0),r.retainPath=!1,r.onBeforeHide.call(i),i.stop(!0,!0).animate(r.animationOut,a,function(){var t=e(this);r.onHide.call(t)})}return this},show:function(){var e=m(this);if(!e)return this;var t=this.addClass(e.hoverClass),n=t.children(e.popUpSelector);return e.onBeforeShow.call(n),n.stop(!0,!0).animate(e.animation,e.speed,function(){e.onShow.call(n)}),this},destroy:function(){return this.each(function(){var n,r=e(this),i=r.data("sf-options");return i?(n=r.find(i.popUpSelector).parent("li"),clearTimeout(i.sfTimer),o(r,i),a(n),s(r),r.off(".superfish").off(".hoverIntent"),n.children(i.popUpSelector).attr("style",function(e,t){return t.replace(/display[^;]+;?/g,"")}),i.$path.removeClass(i.hoverClass+" "+t.bcClass).addClass(i.pathClass),r.find("."+i.hoverClass).removeClass(i.hoverClass),i.onDestroy.call(r),void r.removeData("sf-options")):!1})},init:function(n){return this.each(function(){var r=e(this);if(r.data("sf-options"))return!1;var l=e.extend({},e.fn.superfish.defaults,n),c=r.find(l.popUpSelector).parent("li");l.$path=i(r,l),r.data("sf-options",l),o(r,l),a(c),s(r),u(r,l),c.not("."+t.bcClass).superfish("hide",!0),l.onInit.call(this)})}}}();e.fn.superfish=function(n,r){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?e.error("Method "+n+" does not exist on jQuery.fn.superfish"):t.init.apply(this,arguments)},e.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop},e.fn.extend({hideSuperfishUl:t.hide,showSuperfishUl:t.show})}(jQuery),$(function(){function e(){var e=this.parent();if(e.hasClass("level1")){var t=e.outerWidth(),n=this.outerWidth(),r=(t-n)/2;this.css("left",r+"px")}}var t,n=$(".navigation").data("navoptions");n?(t=n.options,"horizontal-center"===n.submenuPosition&&(t.onBeforeShow=e)):t={animation:{height:"show"},speed:"fast"},$("ul.sf-menu").superfish(t)}),function(e){var t={init:function(n){var r={callback:n||e.noop};return this.bind("keypress.inputDigits",r,t._keypress),this.bind("change.inputDigits",r,t._change),e.browser.webkit&&this.bind("keyup.inputDigits",r,t._keyup),this},_callback:function(t,n,r){setTimeout(function(){var o=e(t).val();if(r||o&&o.match(/\D/g)){var i=o.replace(/\D/g,"");e(t).val(i||"1")}n.callback(t)},1)},_keyup:function(e){8==e.which&&t._callback(this,e.data)},_keypress:function(e){return 0!=e.which&&8!=e.which&&13!=e.which&&String.fromCharCode(e.which).match(/\D/g)?!1:(t._callback(this,e.data),!0)},_change:function(e){t._callback(this,e.data,!0)},destroy:function(){return this.unbind(".inputDigits")}};e.fn.inputDigits=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):!n||e.isFunction(n)?t.init.apply(this,arguments):void e.error("Method "+n+" does not exist on jQuery.inputDigits")}}(jQuery),function(e){function t(){var e=1.1;return e=e.toLocaleString().substring(1,2)}var n={init:function(t){var r={callback:t||e.noop};return this.bind("keypress.inputMoney",r,n._keypress),this.bind("change.inputMoney",r,n._change),e.browser.webkit&&this.bind("keyup.inputMoney",r,n._keyup),this},_callback:function(n,r,o){setTimeout(function(){var i=e(n).val(),a="^\\d+(\\"+t()+"(\\d+)?)?$";if(o||i&&!i.match(new RegExp(a,"g"))){var s=e.inputMoney.parseMoney(i);e(n).val(e.inputMoney.formatMoney(s))}r.callback(n)},1)},_keyup:function(e){8==e.which&&n._callback(this,e.data)},_keypress:function(e){return 0==e.which||8==e.which||13==e.which||String.fromCharCode(e.which).match(/\d|\./g)?(n._callback(this,e.data),!0):!1},_change:function(e){n._callback(this,e.data,!0)},destroy:function(){return this.unbind(".inputMoney")}};e.fn.inputMoney=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):!t||e.isFunction(t)?n.init.apply(this,arguments):void e.error("Method "+t+" does not exist on jQuery.inputMoney")},e.extend({inputMoney:{parseMoney:function(e){return parseInt(e,10)},formatMoney:function(e){return e}}})}(jQuery),$.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),$(function(){if($(".productList-grid-item").length>0){var e=Math.floor($("#productList-grid").width()/$(".productList-grid-item").outerWidth());$(".productList-grid-item:nth-child("+e+")").css("margin-right","0");for(var t=0;t<$(".productList-grid-item").length;t+=e){var n=$(".productList-grid-item").slice(t,t+e),r=n.map(function(){return $(this).height()}).get(),o=Array.max(r);n.css("height",o+"px")}}if($('.content table[border="0"]').addClass("noborders"),$("table[cellpadding], table[cellspacing]").each(function(){var e=$(this),t=$(this).attr("cellpadding");if(t&&"0"!=t){var n=e.find(">tbody>tr>td",">tr>td");n.css("padding",t+"px")}var r=$(this).attr("cellspacing");r&&"0"!=r&&(e.css("border-spacing",t+"px"),e.css("border-collapse","separate"))}),$(".expandable-nav .sc-navigation .active").addClass("expanded").parents(".sc-navigation li").addClass("expanded").each(function(){$(this).find("ul").eq(0).show()}),$(".sc-navigation .expand").click(function(e){var t=$(this).closest("li");t.find("ul").first().toggle(),t.hasClass("expanded")?t.removeClass("expanded"):t.addClass("expanded"),e.preventDefault()}),$("body").hasClass("adjust-content")){var i=0;$(".minusviewport").each(function(){i+=$(this).outerHeight()});var a=$(window).height();a>i&&$(".content").css("min-height",a-i+"px")}}),ParseMoney=function(e){e=$.trim(e).replace(/^\D*(\d+.*)$/g,"$1");var t=parseFloat(e);return isNaN(t)?0:t},FormatMoney=function(e,t){function n(e,t,n,r){var t=isNaN(t=Math.abs(t))?2:t,n=void 0==n?",":n,r=void 0==r?".":r,o=0>e?"-":"",i=parseInt(e=Math.abs(+e||0).toFixed(t))+"",a=(a=i.length)>3?a%3:0;return o+(a?i.substr(0,a)+r:"")+i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-i).toFixed(t).slice(2):"")}var r="",o=t?Redham.currency.symbol:"";return"before"==Redham.currency.symbolPosition&&(r+=o),r+='<span class="amount">'+n(e,2,Redham.currency.decimalSeparator,"")+"</span>","after"==Redham.currency.symbolPosition&&(r+=" "+o),r},Array.max=function(e){return Math.max.apply(Math,e)},Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);o>n;){if(n in r&&r[n]===e)return n;n++}return-1}),Date.prototype.toISOString||!function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,a,s=[];for(i in o)e.call(o,i)&&s.push(i);if(t)for(a=0;r>a;a++)e.call(o,n[a])&&s.push(n[a]);return s}}()),function(){var e={fieldName:null,value:null},t={initialize:function(t){e=t}};t.getFieldName=function(){return e.fieldName},t.getValue=function(){return e.value},window.redham||(window.redham={}),window.redham.antiForgery=t}(),function(){function e(e){var t=Object.create(i);return t.code=e.code||"",t.symbol=e.symbol||"",t.symbolPosition=e.symbolPosition||"",t}function t(e,t){var n=Object.create(s);return n.amount=e||0,n.currency=t||null,n}function n(e,t){if(e.currency!==t.currency&&0!==e.amount&&0!==t.amount)throw Error("Money currency mismatch");var n=0===e.amount?t.currency:e.currency;return n}var r={},o={before:"before",after:"after"},i={},a={};r.parseCurrencies=function(t){for(var n=t.length,r=0;n>r;r++){var o=t[r],i=e(o);a[i.code]=i}},r.getCurrencyByCode=function(e){return a[e]};var s={};s.toString=function(){var e=Globalize.format(this.amount,"n2"),t=this.currency;return t&&this.amount>=.01&&(t.symbolPosition===o.before?e=t.symbol+" "+e:t.symbolPosition===o.after&&(e=e+" "+t.symbol)),e},s.add=function(e){var r=n(this,e),o=t(this.amount+e.amount,r);return o},s.multiply=function(e){var n=t(this.amount*e,this.currency);return n},s.isPositive=function(){return this.amount>0},r.parseMoney=function(e){var n=r.getCurrencyByCode(e.currency),o=t(e.amount,n);return o},r.createMoney=function(e,n){var o=n||null;return("string"==typeof n||n instanceof String)&&(o=r.getCurrencyByCode(n)),t(e,o)},window.redham||(window.redham={}),window.redham.money=r}(),function(){function parseFloat(e){return"number"!=typeof e?Globalize.parseFloat(e):e}function humanizeFileSize(e,t){for(var n=t?1e3:1024,r=globalFormSettings.text.fileSizeUnits,o=0;Math.abs(e)>=n&&o<r.length;)e/=n,++o;return Globalize.format(e,"n1")+" "+r[o]}function listItemConstructor(e,t,n){var r={};return r.value=e||"",r.text=t||"",r.hasMoney=n||!1,r.getJson=function(){return{value:r.value}},r}function listItemMoneyConstructor(e,t,n,r,o){var i=listItemConstructor(e,t,!0);i.showQuantity=o||!1,i.quantity=ko.observable(i.showQuantity?n||1:null),i.price=r||redhamMoney.createMoney(),i.fullPrice=ko.computed(function(){var e=i.price;if(i.showQuantity){var t=i.quantity();0>t&&(t=0),e=e.multiply(t)}return e});var a=i.getJson;return i.getJson=function(){var e=a();return i.showQuantity&&(e.quantity=parseFloat(i.quantity())),e},i}function parseListItems(e,t){for(var n=[],r=e.length,o=0;r>o;o++){var i,a=e[o];if(t){var s=redhamMoney.parseMoney(a.price);i=listItemMoneyConstructor(a.value,a.text,a.quantity,s,a.showQuantity)}else i=listItemConstructor(a.value,a.text);n.push(i)}return n}function getSelectedItems(e,t){for(var n={},r=[],o=e.length,i=0;o>i;i++){var a=e[i];n[a.value]=a}for(var s=t.length,u=0;s>u;u++){var l=t[u],c=n[l];if(!c)throw Error('Item with value "'+l+'" was not found');r.push(c)}return r}function setMultiSelectionControlListItems(e,t,n,r){var o=parseListItems(t,r),i=getSelectedItems(o,n);e.items=o,e.selectedItems=ko.observableArray(i)}function setSingleSelectionControlListItems(e,t,n,r){var o=parseListItems(t,r),i=null;if(n){var a=getSelectedItems(o,[n]);i=a.length>0?a[0]:null}e.items=o,e.selectedItem=ko.observable(i)}function setListItemMoneyQuantityValidation(e,t){for(var n=e.length,r=0;n>r;r++){var o=e[r],i=function(e){return function(){return t(e)}}(o);o.showQuantity&&o.quantity.extend({required:{onlyIf:i},number:{onlyIf:i},min:{params:0,onlyIf:i},step:{params:1,onlyIf:i,message:globalFormSettings.validationMessages.listItemQuantityStep}})}}function createMultiSelectionFormControl(e,t){var n=formControl(e);return setMultiSelectionControlListItems(n,e.items,e.selectedItems,t),
n.required&&n.selectedItems.extend({minLength:{params:1,message:globalFormSettings.validationMessages.multiSelectionRequired}}),t&&(n.fullPrice=ko.computed(function(){for(var e=n.selectedItems(),t=e.length,r=redhamMoney.createMoney(),o=0;t>o;o++){var i=e[o];r=r.add(i.fullPrice())}return r}),setListItemMoneyQuantityValidation(n.items,function(e){var t=n.selectedItems.indexOf(e);return-1!==t})),n.getJson=function(){for(var e=n.selectedItems(),t=e.length,r=[],o=0;t>o;o++){var i=e[o].getJson();r.push(i)}return{selectedItems:r}},n}function createSingleSelectionFormControl(e,t){var n=formControl(e);return setSingleSelectionControlListItems(n,e.items,e.selectedItem,t),n.required&&n.selectedItem.extend({required:{message:globalFormSettings.validationMessages.singleSelectionRequired}}),t&&(n.showQuantity=ko.computed(function(){var e=n.selectedItem();return e?e.showQuantity:!1}),n.fullPrice=ko.computed(function(){var e=n.selectedItem();return e?e.fullPrice():redhamMoney.createMoney()}),setListItemMoneyQuantityValidation(n.items,function(e){var t=n.selectedItem();return t===e})),n.getJson=function(){var e=n.selectedItem();return{selectedItem:e?e.getJson():null}},n}function createCheckBoxList(e,t){var n=createMultiSelectionFormControl(e,t);return n}function createDropDownList(e,t){var n=createSingleSelectionFormControl(e,t);return n.captionText=e.captionText||null,n.showCaption=e.showCaption||!1,n}function createRadioButtonList(e,t){var n=createSingleSelectionFormControl(e,t);return n}function createTextControl(e,t){var n=formControl(e),r=t[e.size];return r||(r=t.small),n.size=r,n.text=ko.observable(e.text||""),n.text.extend({maxLength:globalMaxLength}),n.required&&n.text.extend({required:!0}),n.getJson=function(){return{text:n.text()}},n}function parseFormControl(e,t){var n=e.$type,r=formControlParsers[n],o=r(e,t);return o.type=n,o.cssClass=t.settings.controlCssClasses[n],o}function parseFormControls(e,t){for(var n=[],r=e.length,o=0;r>o;o++){var i=e[o],a=parseFormControl(i,t);n.push(a)}return n}function getCurrentPageTitle(){return document.getElementsByTagName("title")[0].innerHTML}function getCurrentPageUrl(){return window.location.href}function getFormElement(e){for(var t=0;t<formBindings.length;t++){var n=formBindings[t];if(n.form===e)return document.getElementById(n.elementID)}return null}function getAFieldValue(e){var t=getFormElement(e);return $(t).find('[name="'+e.settings.afieldName+'"]').val()}function doForAllFormInstancesExcept(e,t){for(var n=e.id,r=0;r<formBindings.length;r++){var o=formBindings[r],i=o.form;i!==e&&i.id===n&&t(i)}}function checkHasPaymentControls(e){for(var t=e.controls,n=0;n<t.length;n++)if("paymentAcceptor"===t[n].type)return!0;return!1}function parseForm(e){var t={id:e.id,submitButtonText:e.submitButtonText||"",status:ko.observable(formStatuses.ready),settings:globalFormSettings,scrollTo:ko.observable(null),canBeFilledOutOnce:e.canBeFilledOutOnce,wasFilledOutAlready:ko.observable(e.wasFilledOutAlready),canShowStatistics:e.canShowStatistics,showTestPaymentWarning:globalFormSettings.showTestPaymentWarning,statisticsHtml:ko.observable(""),termsPageUrl:globalFormSettings.termsPageUrl};t.wasFilledOutOnce=ko.pureComputed(function(){return t.canBeFilledOutOnce&&t.wasFilledOutAlready()}),t.enabled=ko.pureComputed(function(){return t.status()===formStatuses.ready&&!t.wasFilledOutOnce()}),t.controls=parseFormControls(e.controls,t),t.showTestPaymentWarning=t.settings.showTestPaymentWarning&&checkHasPaymentControls(t),t.fullPrice=ko.computed(function(){for(var e=t.controls,n=e.length,r=redhamMoney.createMoney(),o=0;n>o;o++){var i=e[o],a=i.fullPrice;a&&(r=r.add(a()))}return r}),t.getPostData=function(){for(var e={},n=t.controls,r=n.length,o=0;r>o;o++){var i=n[o],a=i.getJson();e[i.id]=a}var s={originalPageUrl:getCurrentPageUrl(),originalPageTitle:getCurrentPageTitle(),controls:JSON.stringify(e)};return s[globalFormSettings.afieldName]=getAFieldValue(t),s[redhamAntiForgery.getFieldName()]=redhamAntiForgery.getValue(),s};var n=ko.validation.group({controls:t.controls,termsAccepted:t.termsAccepted},{deep:!0});return t.hideErrorMessages=function(){n.showAllMessages(!1)},t.post=function(){var e=n();if(0!==e.length)return void n.showAllMessages();var r=t.getPostData(),o=t.settings.postUrlTemplate.replace("{formID}",t.id),i=function(){t.status(formStatuses.error)},a=function(e,n,r){var o=r.getResponseHeader("content-type")||"";for(var a in formPostContentTypeActions)if(formPostContentTypeActions.hasOwnProperty(a)&&o.indexOf(a)>-1){try{formPostContentTypeActions[a](t,e)}catch(s){i()}return}i()};t.status(formStatuses.posting),doForAllFormInstancesExcept(t,function(e){e.wasFilledOutAlready(!0)}),t.scrollTo(t),$.post(o,r,a).fail(i)},t.showStatisticsButton=ko.computed(function(){return t.canShowStatistics&&t.wasFilledOutOnce()}),t.showStatistics=function(){var e=t.settings.getStatisticsUrlTemplate.replace("{formID}",t.id),n=function(){t.status(formStatuses.error)},r=function(e){t.statisticsHtml(e),t.status(formStatuses.showStatistics)};$.get(e,null,r,"html").fail(n)},t}var redhamMoney=window.redham.money,redhamAntiForgery=window.redham.antiForgery,redhamForms={},globalMaxLength=3e3,formBindings=[],globalFormSettings={showTestPaymentWarning:!1,afieldName:"sender_email",minQuantity:0,postUrlTemplate:"/forms/post/{formID}/",getStatisticsUrlTemplate:"/forms/statistics/{formID}/",termsPageUrl:"",validationMessages:{multiSelectionRequired:"Пожалуйста, выберите хотя бы один вариант.",singleSelectionRequired:"Пожалуйста, выберите один из вариантов.",phoneNumberPattern:"Пожалуйста, укажите здесь правильный телефонный номер.",websiteUrlPattern:"Пожалуйста, укажите здесь правильный http://адрес.",listItemQuantityStep:"Значение поля должно быть целым.",fileUploadRequired:"Пожалуйста, загрузить файл.",paymentAcceptorEnteredAmountStep:"Пожалуйста, укажите сумму с точностью до 0,01."},text:{fileupload:{error:"При загрузке файла произошла ошибка.",sizeLimitError:"Файл слишком большой. Максимально допустимый размер файла: {size}."},fileSizeUnits:["Б","Кбайт","Мбайт","Гбайт","Пбайт","Эбайт","Збайт","Ибайт"]},validationOptions:{insertMessages:!1,grouping:{deep:!0,observable:!0,live:!1}},datepickerOptions:{minDate:new Date(1972,0,1),maxDate:new Date(2030,11,31)},fileuploadOptions:{url:"/forms/uploadfile/",dropZone:null,maxNumberOfFiles:1,maxFileSize:20971520},controlCssClasses:{address:"address",checkBoxList:"checkBoxList",checkBoxListMoney:"checkBoxList-money",dropDownList:"dropDownList",dropDownListMoney:"dropDownList-money",emailAddress:"email",fileUpload:"fileUpload",multilineText:"paragraphText",paymentAcceptor:"paymentsAcceptor",personName:"personName",phoneNumber:"phone",radioButtonList:"radioButtonList",radioButtonListMoney:"radioButtonList-money",section:"separator",singlelineText:"singleLine",websiteUrl:"website"}};redhamForms.initialize=function(e){$.extend(!0,globalFormSettings,e)};var formStatuses={ready:"ready",posting:"posting",error:"error",showStatistics:"showStatistics"},formControl=function(e){var t={};return e=e||{},t.id=e.id||null,t.title=e.title||null,t.description=e.description||null,t.required=e.required||!1,t},multilineTextSizes={small:4,medium:8,big:16},singlelineTextSizes={small:20,medium:40,big:60},formControlParsers={address:function(e){var t=formControl(e);return t.address=ko.observable(e.address||""),t.city=ko.observable(e.city||""),t.state=ko.observable(e.state||""),t.postalCode=ko.observable(e.postalCode||""),t.address.extend({maxLength:globalMaxLength}),t.city.extend({maxLength:globalMaxLength}),t.state.extend({maxLength:globalMaxLength}),t.postalCode.extend({maxLength:globalMaxLength}),t.required&&(t.address.extend({required:!0}),t.city.extend({required:!0}),t.postalCode.extend({required:!0})),t.getJson=function(){return{address:t.address(),city:t.city(),state:t.state(),postalCode:t.postalCode()}},t},checkBoxList:function(e){var t=createCheckBoxList(e,!1);return t},checkBoxListMoney:function(e){var t=createCheckBoxList(e,!0);return t},date:function(e){var t=formControl(e);return function(){var n=null;if(e.date){var r=e.date.substring(0,10),o=Globalize.parseDate(r,"yyyy-MM-dd");n=Globalize.format(o,"d")}t.date=ko.observable(n).extend({date:!0})}(),t.parsedDate=ko.computed(function(){var e=t.date();if(e){var n=Globalize.parseDate(e),r=null;if(n){var o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()));r=o.toISOString()}return r}return""}),t.required&&t.date.extend({required:!0}),t.getJson=function(){return{date:t.parsedDate()}},t},dropDownList:function(e){var t=createDropDownList(e,!1);return t},dropDownListMoney:function(e){var t=createDropDownList(e,!0);return t},emailAddress:function(e){var t=formControl(e);return t.emailAddress=ko.observable(e.emailAddress||""),t.required&&t.emailAddress.extend({required:!0}),t.emailAddress.extend({email:!0,maxLength:globalMaxLength}),t.getJson=function(){return{emailAddress:t.emailAddress()}},t},fileUpload:function(e,t){function n(e){o.filename(""),o.displayName(""),o.errorMessage(e)}function r(e){return e.files[0]}var o=formControl(e);o.filename=ko.observable(""),o.displayName=ko.observable(""),o.fileSize=ko.observable(""),o.uploadedSize=ko.observable(""),o.uploading=ko.observable(!1),o.errorMessage=ko.observable("");var i;return o.cancel=function(){t.status()===formStatuses.ready&&(i&&i.abort(),n(""))},o.fileuploadOptions={add:function(e,t){var n=r(t),a=n.size,s=globalFormSettings.fileuploadOptions.maxFileSize;if(a&&a>s){var u=humanizeFileSize(s,!1),l=globalFormSettings.text.fileupload.sizeLimitError.replace("{size}",u);return void o.errorMessage(l)}i=t.submit()},send:function(e,t){var n=r(t),i=humanizeFileSize(n.size,!1);o.fileSize(i),o.uploading(!0)},done:function(e,t){if(t.result.errorMessage)n(t.result.errorMessage);else{var i=r(t),a=i?i.name:"file";o.displayName(a);var s=t.result.filename||"";o.filename(s),o.errorMessage("")}},fail:function(){n(globalFormSettings.text.fileupload.error)},always:function(){i=null,o.uploading(!1)},progressall:function(e,t){var n=humanizeFileSize(t.loaded,!1,2);o.uploadedSize(n)}},$.extend(!0,o.fileuploadOptions,globalFormSettings.fileuploadOptions),o.required&&o.filename.extend({required:{onlyIf:function(){return!o.uploading()},message:globalFormSettings.validationMessages.fileUploadRequired}}),o.uploading.extend({equal:!1}),o.getJson=function(){return{filename:o.filename(),displayName:o.displayName()}},o},multilineText:function(e){var t=createTextControl(e,multilineTextSizes);return t},paymentAcceptor:function(e){var t=formControl(e);return t.initialPrice=redhamMoney.parseMoney(e.initialPrice),t.userMode=e.userMode||!1,t.amountDescription=e.amountDescription||"",t.hidePrices=e.hidePrices||!1,t.enteredAmount=ko.observable(e.enteredAmount||0),t.userMode?t.required&&t.enteredAmount.extend({required:!0}):t.fullPrice=ko.computed(function(){return t.initialPrice}),t.enteredAmount.extend({number:!0,min:0,step:{params:.01,message:globalFormSettings.validationMessages.paymentAcceptorEnteredAmountStep}}),t.getJson=function(){var e=t.enteredAmount();return e&&(e=parseFloat(e)),{enteredAmount:t.userMode?e:null}},t},personName:function(e){var t=formControl(e);return t.firstName=ko.observable(e.firstName||""),t.lastName=ko.observable(e.lastName||""),t.patronymicName=ko.observable(e.patronymicName||""),t.firstName.extend({maxLength:100}),t.lastName.extend({maxLength:100}),t.patronymicName.extend({maxLength:100}),t.required&&(t.firstName.extend({required:!0}),t.lastName.extend({required:!0})),t.getJson=function(){return{firstName:t.firstName(),lastName:t.lastName(),patronymicName:t.patronymicName()}},t},phoneNumber:function(e){var t=formControl(e);return t.phoneNumber=ko.observable(e.phoneNumber||"").extend({pattern:{params:/(\D*\d){10}/,message:globalFormSettings.validationMessages.phoneNumberPattern}}),t.phoneNumber.extend({maxLength:100}),t.required&&(t.phoneNumber.extend({required:!0}),t.phoneNumber.isModified(!1)),t.getJson=function(){return{phoneNumber:t.phoneNumber()}},t},radioButtonList:function(e){var t=createRadioButtonList(e,!1);return t},radioButtonListMoney:function(e){var t=createRadioButtonList(e,!0);return t},section:function(e){var t=formControl(e);return t.getJson=function(){return{}},t},singlelineText:function(e){var t=createTextControl(e,singlelineTextSizes);return t},websiteUrl:function(e){var t=formControl(e);return t.websiteUrl=ko.observable(e.websiteUrl||""),t.required&&t.websiteUrl.extend({required:!0}),t.websiteUrl.extend({maxLength:globalMaxLength,pattern:{params:"[Hh][Tt][Tt][Pp]://.+",message:globalFormSettings.validationMessages.websiteUrlPattern}}),t.getJson=function(){return{websiteUrl:t.websiteUrl()}},t}},formPostContentTypeActions={html:function(form,data){var element=getFormElement(form);if(!element)throw Error("Element not found for form "+form.id);ko.cleanNode(element);var parsedElements=$.parseHTML(data,document,!0);$(element).replaceWith(parsedElements),parsedElements.find("script").each(function(){var scriptContent=$(this).html();eval(scriptContent)})},json:function(e,t){var n="object"==typeof t?t:JSON.parse(t);if(!n||!n.redirectUrl)throw Error("Invalid JSON response: redirect property is missing.");window.location.href=n.redirectUrl}};redhamForms.bind=function(e,t){var n=document.getElementById(e),r=parseForm(t);ko.applyBindings(r,n),r.hideErrorMessages(),formBindings.push({elementID:e,form:r})},redhamForms.getFormBindings=function(){return formBindings},window.redham.forms=redhamForms}(),function(){function e(e){for(var n=Object.keys(window),r=0;r<n.length;r++){var o=n[r];o.length>t.length&&0===o.lastIndexOf(t)&&e(window[o])}}var t="yaCounter",n={forEachCounter:e,reachGoal:function(t){e(function(e){e.reachGoal(t)})}};window.redham||(window.redham={}),window.redham.yandexMetrika=n}(),function(){function e(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),$.ajax(t)}function t(e){var t=window.ymaps;t.ready(function(){var n=new t.Map(e.elementId,{center:[e.lat,e.lon],zoom:e.zoom}),r=new t.Placemark(n.getCenter(),{hintContent:e.label});n.geoObjects.add(r)})}var n={},r=!0,o=!1,i=[];n.add=function(n){i.push(n),r&&(e("https://api-maps.yandex.ru/2.1/?lang=ru_RU&load=Map,Placemark").done(function(){o=!0;for(var e=0;e<i.length;e++)t(i[e])}),r=!1),o&&t(n)},window.redham.yandexMaps=n}(),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var o=["opacity",t,~~(100*e),n,r].join("-"),i=.01+n/r*100,a=Math.max(1-(1-e)/t*(100-i),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),u=s&&"-"+s+"-"||"";return d[o]||(p.insertRule("@"+u+"keyframes "+o+"{0%{opacity:"+a+"}"+i+"%{opacity:"+e+"}"+(i+.01)+"%{opacity:1}"+(i+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",p.cssRules.length),d[o]=1),o}function r(e,t){var n,r,o=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<c.length;r++)if(n=c[r]+t,void 0!==o[n])return n;return void 0!==o[t]?t:void 0}function o(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=i(e||{},s.defaults,f)}function u(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,r){function i(){return o(n("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,u){t(p,t(o(i(),{rotation:360/r.lines*e+"deg",left:~~s}),t(o(n("roundrect",{arcsize:r.corners}),{width:l,height:r.width,left:r.radius,top:-r.width>>1,filter:u}),n("fill",{color:a(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var u,l=r.length+r.width,c=2*l,d=2*-(r.width+r.length)+"px",p=o(i(),{position:"absolute",top:d,left:d});if(r.shadow)for(u=1;u<=r.lines;u++)s(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=r.lines;u++)s(u);return t(e,p)},s.prototype.opacity=function(e,t,n,r){var o=e.firstChild;r=r.shadow&&r.lines||0,o&&t+r<o.childNodes.length&&(o=o.childNodes[t+r],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var l,c=["webkit","Moz","ms","O"],d={},p=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},i(s.prototype,{spin:function(t){this.stop();var n=this,r=n.opts,i=n.el=o(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});r.radius+r.length+r.width;if(o(i,{left:r.left,top:r.top}),t&&t.insertBefore(i,t.firstChild||null),i.setAttribute("role","progressbar"),n.lines(i,n.opts),!l){var a,s=0,u=(r.lines-1)*(1-r.direction)/2,c=r.fps,d=c/r.speed,p=(1-r.opacity)/(d*r.trail/100),f=d/r.lines;!function m(){s++;for(var e=0;e<r.lines;e++)a=Math.max(1-(s+(r.lines-e)*f)%d*p,r.opacity),n.opacity(i,e*r.direction+u,a,r);n.timeout=n.el&&setTimeout(m,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,i){function s(t,n){return o(e(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*c+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(var u,c=0,d=(i.lines-1)*(1-i.direction)/2;c<i.lines;c++)u=o(e(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:l&&n(i.opacity,i.trail,d+c*i.direction,i.lines)+" "+1/i.speed+"s linear infinite"}),i.shadow&&t(u,o(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(u,s(a(i.color,c),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var m=o(e("group"),{behavior:"url(#default#VML)"});return!r(m,"transform")&&m.adj?u():l=r(m,"animation"),s}),function(e,t){"object"==typeof exports?module.exports=t(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],t):e.Ladda=t(e.Spinner)}(this,function(e){"use strict";function t(e){if(void 0===e)return void console.warn("Ladda button target must be defined.");e.querySelector(".ladda-label")||(e.innerHTML='<span class="ladda-label">'+e.innerHTML+"</span>");var t,n=e.querySelector(".ladda-spinner");n||(n=document.createElement("span"),n.className="ladda-spinner"),e.appendChild(n);var r,o={start:function(){return t||(t=a(e)),e.setAttribute("disabled",""),e.setAttribute("data-loading",""),clearTimeout(r),t.spin(n),this.setProgress(0),this},startAfter:function(e){return clearTimeout(r),r=setTimeout(function(){o.start()},e),this},stop:function(){return e.removeAttribute("disabled"),e.removeAttribute("data-loading"),clearTimeout(r),t&&(r=setTimeout(function(){t.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var n=e.querySelector(".ladda-progress");0===t&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",e.appendChild(n)),n.style.width=(t||0)*e.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),e.setAttribute("disabled",""),this},isLoading:function(){return e.hasAttribute("data-loading")},remove:function(){clearTimeout(r),e.removeAttribute("disabled",""),e.removeAttribute("data-loading",""),t&&(t.stop(),t=null);for(var n=0,i=u.length;i>n;n++)if(o===u[n]){u.splice(n,1);break}}};return u.push(o),o}function n(e,t){for(;e.parentNode&&e.tagName!==t;)e=e.parentNode;return t===e.tagName?e:void 0}function r(e){for(var t=["input","textarea","select"],n=[],r=0;t.length>r;r++)for(var o=e.getElementsByTagName(t[r]),i=0;o.length>i;i++)o[i].hasAttribute("required")&&n.push(o[i]);return n}function o(e,o){o=o||{};var i=[];"string"==typeof e?i=s(document.querySelectorAll(e)):"object"==typeof e&&"string"==typeof e.nodeName&&(i=[e]);for(var a=0,u=i.length;u>a;a++)(function(){var e=i[a];if("function"==typeof e.addEventListener){var s=t(e),u=-1;e.addEventListener("click",function(){var t=!0,i=n(e,"FORM");if(void 0!==i)for(var a=r(i),l=0;a.length>l;l++)""===a[l].value.replace(/^\s+|\s+$/g,"")&&(t=!1),"checkbox"!==a[l].type&&"radio"!==a[l].type||a[l].checked||(t=!1),"email"===a[l].type&&(t=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(a[l].value));t&&(s.startAfter(1),"number"==typeof o.timeout&&(clearTimeout(u),u=setTimeout(s.stop,o.timeout)),"function"==typeof o.callback&&o.callback.apply(null,[s]))},!1)}})()}function i(){for(var e=0,t=u.length;t>e;e++)u[e].stop()}function a(t){var n,r=t.offsetHeight;0===r&&(r=parseFloat(window.getComputedStyle(t).height)),r>32&&(r*=.8),t.hasAttribute("data-spinner-size")&&(r=parseInt(t.getAttribute("data-spinner-size"),10)),t.hasAttribute("data-spinner-color")&&(n=t.getAttribute("data-spinner-color"));var o=12,i=.2*r,a=.6*i,s=7>i?2:3;return new e({color:n||"#fff",lines:o,radius:i,length:a,width:s,zIndex:"auto",top:"auto",left:"auto",className:""})}function s(e){for(var t=[],n=0;e.length>n;n++)t.push(e[n]);return t}var u=[];return{bind:o,create:t,stopAll:i}});