!function(){var a=+new Date;function b(D,E,F){var G;try{var H=D.document.createElement("iframe");D.document.documentElement.appendChild(H);var I=H.contentWindow;G=I.Array,(H.parentNode||H.parent).removeChild(H)}catch(t){G=Array}function K(t){this._startTime=t||+new Date}this.window=D,K.prototype.getMs=function(){return+new Date-this._startTime},K.prototype.getS=function(){return Math.round(this.getMs()/1e3)},this.time=new K(F);var L=function(){var h,s,c,n,a,i,r=new G,o=r.concat,u=r.filter,l=r.slice,d=window.document,p={},e={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},g=/^\s*<(\w+|!)[^>]*>/,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,w=["val","css","html","text","data","width","height","offset"],t=d.createElement("table"),b=d.createElement("tr"),x={tr:d.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:b,th:b,"*":d.createElement("div")},k=/complete|loaded|interactive/,S=/^[\w-]*$/,T={},C=T.toString,A={},j=d.createElement("div"),E={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},I=Array.isArray||function(t){return t instanceof Array};function M(t){return null==t?String(t):T[C.call(t)]||"object"}function R(t){return"function"==M(t)}function P(t){return null!=t&&t==t.window}function z(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return"object"==M(t)}function O(t){return D(t)&&!P(t)&&Object.getPrototypeOf(t)==Object.prototype}function N(t){var e=!!t&&"length"in t&&t.length,i=c.type(t);return"function"!=i&&!P(t)&&("array"==i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function $(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function L(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function W(t,e){return"number"!=typeof e||f[$(t)]?e:e+"px"}function U(t){return"children"in t?l.call(t.children):c.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function B(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function F(t,e){return null==e?c(t):c(t).filter(e)}function V(t,e,i,n){return R(e)?e.call(t,i,n):e}function H(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function q(t,e){var i=t.className||"",n=i&&i.baseVal!==h;if(e===h)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?c.parseJSON(e):e):e}catch(t){return e}}return A.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,o=!r;return o&&(r=j).appendChild(t),n=~A.qsa(r,e).indexOf(t),o&&j.removeChild(t),n},a=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},i=function(i){return u.call(i,function(t,e){return i.indexOf(t)==e})},A.fragment=function(t,e,i){var n,r,o;return _.test(t)&&(n=c(d.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(m,"<$1></$2>")),e===h&&(e=g.test(t)&&RegExp.$1),e in x||(e="*"),(o=x[e]).innerHTML=""+t,n=c.each(l.call(o.childNodes),function(){o.removeChild(this)})),O(i)&&(r=c(n),c.each(i,function(t,e){-1<w.indexOf(t)?r[t](e):r.attr(t,e)})),n},A.Z=function(t,e){return new B(t,e)},A.isZ=function(t){return t instanceof A.Z},A.init=function(t,e){var i,n;if(!t)return A.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&g.test(t))i=A.fragment(t,RegExp.$1,e),t=null;else{if(e!==h)return c(e).find(t);i=A.qsa(d,t)}else{if(R(t))return c(d).ready(t);if(A.isZ(t))return t;if(I(t))n=t,i=u.call(n,function(t){return null!=t});else if(D(t))i=[t],t=null;else if(g.test(t))i=A.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==h)return c(e).find(t);i=A.qsa(d,t)}}return A.Z(i,t)},(c=function(t,e){return A.init(t,e)}).extend=function(e){var i,t=l.call(arguments,1);return"boolean"==typeof e&&(i=e,e=t.shift()),t.forEach(function(t){!function t(e,i,n){for(s in i)n&&(O(i[s])||I(i[s]))?(O(i[s])&&!O(e[s])&&(e[s]={}),I(i[s])&&!I(e[s])&&(e[s]=[]),t(e[s],i[s],n)):i[s]!==h&&(e[s]=i[s])}(e,t,i)}),e},A.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],o=n||r?e.slice(1):e,s=S.test(o);return t.getElementById&&s&&n?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:l.call(s&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},c.contains=d.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},c.type=M,c.isFunction=R,c.isWindow=P,c.isArray=I,c.isPlainObject=O,c.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},c.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},c.inArray=function(t,e,i){return r.indexOf.call(e,t,i)},c.camelCase=a,c.trim=function(t){return null==t?"":String.prototype.trim.call(t)},c.uuid=0,c.support={},c.expr={},c.noop=function(){},c.map=function(t,e){var i,n,r,o,s=[];if(N(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&s.push(i);else for(r in t)null!=(i=e(t[r],r))&&s.push(i);return 0<(o=s).length?c.fn.concat.apply([],o):o},c.each=function(t,e){var i,n;if(N(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},c.grep=function(t,e){return u.call(t,e)},window.JSON&&(c.parseJSON=JSON.parse),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){T["[object "+e+"]"]=e.toLowerCase()}),c.fn={constructor:A.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=A.isZ(e)?e.toArray():e;return o.apply(A.isZ(this)?this.toArray():this,i)},map:function(i){return c(c.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return c(l.apply(this,arguments))},ready:function(t){return k.test(d.readyState)&&d.body?t(c):d.addEventListener("DOMContentLoaded",function(){t(c)},!1),this},get:function(t){return t===h?l.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return r.every.call(this,function(t,e){return!1!==i.call(t,e,t)}),this},filter:function(e){return R(e)?this.not(this.not(e)):c(u.call(this,function(t){return A.matches(t,e)}))},add:function(t,e){return c(i(this.concat(c(t,e))))},is:function(t){return 0<this.length&&A.matches(this[0],t)},not:function(e){var i=[];if(R(e)&&e.call!==h)this.each(function(t){e.call(this,t)||i.push(this)});else{var n="string"==typeof e?this.filter(e):N(e)&&R(e.item)?l.call(e):c(e);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return c(i)},has:function(t){return this.filter(function(){return D(t)?c.contains(this,t):c(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!D(t)?t:c(t)},last:function(){var t=this[this.length-1];return t&&!D(t)?t:c(t)},find:function(t){var i=this;return t?"object"==typeof t?c(t).filter(function(){var e=this;return r.some.call(i,function(t){return c.contains(t,e)})}):1==this.length?c(A.qsa(this[0],t)):this.map(function(){return A.qsa(this,t)}):c()},closest:function(i,n){var r=[],o="object"==typeof i&&c(i);return this.each(function(t,e){for(;e&&!(o?0<=o.indexOf(e):A.matches(e,i));)e=e!==n&&!z(e)&&e.parentNode;e&&r.indexOf(e)<0&&r.push(e)}),c(r)},parents:function(t){for(var e=[],i=this;0<i.length;)i=c.map(i,function(t){if((t=t.parentNode)&&!z(t)&&e.indexOf(t)<0)return e.push(t),t});return F(e,t)},parent:function(t){return F(i(this.pluck("parentNode")),t)},children:function(t){return F(this.map(function(){return U(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||l.call(this.childNodes)})},siblings:function(t){return F(this.map(function(t,e){return u.call(U(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return c.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,p[t]||(e=d.createElement(t),d.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),p[t]=i),p[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var i=R(e);if(this[0]&&!i)var n=c(e).get(0),r=n.parentNode||1<this.length;return this.each(function(t){c(this).wrapAll(i?e.call(this,t):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){var e;for(c(this[0]).before(t=c(t));(e=t.children()).length;)t=e.first();c(t).append(this)}return this},wrapInner:function(r){var o=R(r);return this.each(function(t){var e=c(this),i=e.contents(),n=o?r.call(this,t):r;i.length?i.wrapAll(n):e.append(n)})},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=c(this);(e===h?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return c(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return c(this.pluck("nextElementSibling")).filter(t||"*")},html:function(i){return 0 in arguments?this.each(function(t){var e=this.innerHTML;c(this).empty().append(V(this,i,t,e))}):0 in this?this[0].innerHTML:null},text:function(i){return 0 in arguments?this.each(function(t){var e=V(this,i,t,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,i){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(D(e))for(s in e)H(this,s,e[s]);else H(this,e,V(this,i,t,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(t=this[0].getAttribute(e))?t:h},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){H(this,t)},this)})},prop:function(e,i){return e=E[e]||e,1 in arguments?this.each(function(t){this[e]=V(this,i,t,this[e])}):this[0]&&this[0][e]},removeProp:function(t){return t=E[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(y,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?J(n):h},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=V(this,e,t,this.value)})):this[0]&&(this[0].multiple?c(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(t){var e=c(this),i=V(this,o,t,e.offset()),n=e.offsetParent().offset(),r={top:i.top-n.top,left:i.left-n.left};"static"==e.css("position")&&(r.position="relative"),e.css(r)});if(!this.length)return null;if(d.documentElement!==this[0]&&!c.contains(d.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[a(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(I(t)){if(!i)return;var n={},r=getComputedStyle(i,"");return c.each(t,function(t,e){n[e]=i.style[a(e)]||r.getPropertyValue(e)}),n}}var o="";if("string"==M(t))e||0===e?o=$(t)+":"+W(t,e):this.each(function(){this.style.removeProperty($(t))});else for(s in t)t[s]||0===t[s]?o+=$(s)+":"+W(s,t[s])+";":this.each(function(){this.style.removeProperty($(s))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(c(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&r.some.call(this,function(t){return this.test(q(t))},L(t))},addClass:function(i){return i?this.each(function(t){if("className"in this){n=[];var e=q(this);V(this,i,t,e).split(/\s+/g).forEach(function(t){c(this).hasClass(t)||n.push(t)},this),n.length&&q(this,e+(e?" ":"")+n.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===h)return q(this,"");n=q(this),V(this,e,t,n).split(/\s+/g).forEach(function(t){n=n.replace(L(t)," ")}),q(this,n.trim())}})},toggleClass:function(i,n){return i?this.each(function(t){var e=c(this);V(this,i,t,q(this)).split(/\s+/g).forEach(function(t){(n===h?!e.hasClass(t):n)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===h?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===h?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=v.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(c(t).css("margin-top"))||0,i.left-=parseFloat(c(t).css("margin-left"))||0,n.top+=parseFloat(c(e[0]).css("border-top-width"))||0,n.left+=parseFloat(c(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||d.body;t&&!v.test(t.nodeName)&&"static"==c(t).css("position");)t=t.offsetParent;return t})}},c.fn.detach=c.fn.remove,["width","height"].forEach(function(n){var r=n.replace(/./,function(t){return t[0].toUpperCase()});c.fn[n]=function(e){var t,i=this[0];return e===h?P(i)?i["inner"+r]:z(i)?i.documentElement["scroll"+r]:(t=this.offset())&&t[n]:this.each(function(t){(i=c(this)).css(n,V(this,e,t,i[n]()))})}}),["after","prepend","before","append"].forEach(function(e,s){var a=s%2;c.fn[e]=function(){var i,n,r=c.map(arguments,function(t){var e=[];return"array"==(i=M(t))?(t.forEach(function(t){return t.nodeType!==h?e.push(t):c.zepto.isZ(t)?e=e.concat(t.get()):void(e=e.concat(A.fragment(t)))}),e):"object"==i||null==t?t:A.fragment(t)}),o=1<this.length;return r.length<1?this:this.each(function(t,e){n=a?e:e.parentNode,e=0==s?e.nextSibling:1==s?e.firstChild:2==s?e:null;var i=c.contains(d.documentElement,n);r.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!n)return c(t).remove();n.insertBefore(t,e),i&&function t(e,i){i(e);for(var n=0,r=e.childNodes.length;n<r;n++)t(e.childNodes[n],i)}(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}})})})},c.fn[a?e+"To":"insert"+(s?"Before":"After")]=function(t){return c(t)[e](this),this}}),A.Z.prototype=B.prototype=c.fn,A.uniq=i,A.deserializeValue=J,c.zepto=A,c}();!function(u){var l,e=1,c=Array.prototype.slice,d=u.isFunction,p=function(t){return"string"==typeof t},f={},o={},i="onfocusin"in window,n={focus:"focusin",blur:"focusout"},g={mouseenter:"mouseover",mouseleave:"mouseout"};function _(t){return t._zid||(t._zid=e++)}function s(t,e,i,n){if((e=m(e)).ns)var r=(o=e.ns,new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)"));var o;return(f[_(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!i||_(t.fn)===_(i))&&(!n||t.sel==n)})}function m(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function v(t,e){return t.del&&!i&&t.e in n||!!e}function y(t){return g[t]||i&&n[t]||t}function w(r,t,e,o,s,a,h){var i=_(r),c=f[i]||(f[i]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return u(document).ready(e);var i=m(t);i.fn=e,i.sel=s,i.e in g&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!u.contains(this,e))return i.fn.apply(this,arguments)});var n=(i.del=a)||e;i.proxy=function(t){if(!(t=k(t)).isImmediatePropagationStopped()){t.data=o;var e=n.apply(r,t._args==l?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},i.i=c.length,c.push(i),"addEventListener"in r&&r.addEventListener(y(i.e),i.proxy,v(i,h))})}function b(e,t,i,n,r){var o=_(e);(t||"").split(/\s/).forEach(function(t){s(e,t,i,n).forEach(function(t){delete f[o][t.i],"removeEventListener"in e&&e.removeEventListener(y(t.e),t.proxy,v(t,r))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",u.event={add:w,remove:b},u.proxy=function(t,e){var i=2 in arguments&&c.call(arguments,2);if(d(t)){var n=function(){return t.apply(e,i?i.concat(c.call(arguments)):arguments)};return n._zid=_(t),n}if(p(e))return i?(i.unshift(t[e],t),u.proxy.apply(null,i)):u.proxy(t[e],t);throw new TypeError("expected function")},u.fn.bind=function(t,e,i){return this.on(t,e,i)},u.fn.unbind=function(t,e){return this.off(t,e)},u.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var a=function(){return!0},x=function(){return!1},r=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function k(n,r){return!r&&n.isDefaultPrevented||(r||(r=n),u.each(t,function(t,e){var i=r[t];n[t]=function(){return this[e]=a,i&&i.apply(r,arguments)},n[e]=x}),n.timeStamp||(n.timeStamp=Date.now()),(r.defaultPrevented!==l?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=a)),n}function S(t){var e,i={originalEvent:t};for(e in t)r.test(e)||t[e]===l||(i[e]=t[e]);return k(i,t)}u.fn.delegate=function(t,e,i){return this.on(e,t,i)},u.fn.undelegate=function(t,e,i){return this.off(e,t,i)},u.fn.live=function(t,e){return u(document.body).delegate(this.selector,t,e),this},u.fn.die=function(t,e){return u(document.body).undelegate(this.selector,t,e),this},u.fn.on=function(e,r,i,o,s){var a,h,n=this;return e&&!p(e)?(u.each(e,function(t,e){n.on(t,r,i,e,s)}),n):(p(r)||d(o)||!1===o||(o=i,i=r,r=l),o!==l&&!1!==i||(o=i,i=l),!1===o&&(o=x),n.each(function(t,n){s&&(a=function(t){return b(n,t.type,o),o.apply(this,arguments)}),r&&(h=function(t){var e,i=u(t.target).closest(r,n).get(0);if(i&&i!==n)return e=u.extend(S(t),{currentTarget:i,liveFired:n}),(a||o).apply(i,[e].concat(c.call(arguments,1)))}),w(n,e,o,i,r,h||a)}))},u.fn.off=function(t,i,e){var n=this;return t&&!p(t)?(u.each(t,function(t,e){n.off(t,i,e)}),n):(p(i)||d(e)||!1===e||(e=i,i=l),!1===e&&(e=x),n.each(function(){b(this,t,e,i)}))},u.fn.trigger=function(t,e){return(t=p(t)||u.isPlainObject(t)?u.Event(t):k(t))._args=e,this.each(function(){t.type in n&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):u(this).triggerHandler(t,e)})},u.fn.triggerHandler=function(i,n){var r,o;return this.each(function(t,e){(r=S(p(i)?u.Event(i):i))._args=n,r.target=e,u.each(s(e,i.type||i),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){u.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),u.Event=function(t,e){p(t)||(t=(e=t).type);var i=document.createEvent(o[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),k(i)}}(L),function(ui){var xi,yi,vi=+new Date,wi=window.document,zi=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ai=/^(?:text|application)\/javascript/i,Bi=/^(?:text|application)\/xml/i,Ci="application/json",Di="text/html",Ei=/^\s*$/,Fi=wi.createElement("a");function Hi(t,e,i,n){if(t.global)return r=e||wi,o=i,s=n,a=ui.Event(o),ui(r).trigger(a,s),!a.isDefaultPrevented();var r,o,s,a}function Ki(t,e){var i=e.context;if(!1===e.beforeSend.call(i,t,e)||!1===Hi(e,i,"ajaxBeforeSend",[t,e]))return!1;Hi(e,i,"ajaxSend",[t,e])}function Li(t,e,i,n){var r=i.context,o="success";i.success.call(r,t,o,e),n&&n.resolveWith(r,[t,o,e]),Hi(i,r,"ajaxSuccess",[e,i,t]),Ni(o,e,i)}function Mi(t,e,i,n,r){var o=n.context;n.error.call(o,i,e,t),r&&r.rejectWith(o,[i,e,t]),Hi(n,o,"ajaxError",[i,n,t||e]),Ni(e,i,n)}function Ni(t,e,i){var n,r=i.context;i.complete.call(r,e,t),Hi(i,r,"ajaxComplete",[e,i]),(n=i).global&&!--ui.active&&Hi(n,null,"ajaxStop")}function Pi(){}function Ri(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function Ti(t,e,i,n){return ui.isFunction(e)&&(n=i,i=e,e=void 0),ui.isFunction(i)||(n=i,i=void 0),{url:t,data:e,success:i,dataType:n}}Fi.href=window.location.href,ui.active=0,ui.ajaxJSONP=function(i,n){if(!("type"in i))return ui.ajax(i);var r,o,t=i.jsonpCallback,s=(ui.isFunction(t)?t():t)||"Zepto"+vi++,a=wi.createElement("script"),h=window[s],e=function(t){ui(a).triggerHandler("error",t||"abort")},c={abort:e};return n&&n.promise(c),ui(a).on("load error",function(t,e){clearTimeout(o),ui(a).off().remove(),"error"!=t.type&&r?Li(r[0],c,i,n):Mi(null,e||"error",c,i,n),window[s]=h,r&&ui.isFunction(h)&&h(r[0]),h=r=void 0}),!1===Ki(c,i)?e("abort"):(window[s]=function(){r=arguments},a.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),wi.head.appendChild(a),0<i.timeout&&(o=setTimeout(function(){e("timeout")},i.timeout))),c},ui.ajaxSettings={type:"GET",beforeSend:Pi,success:Pi,error:Pi,complete:Pi,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:Ci,xml:"application/xml, text/xml",html:Di,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:Pi},ui.ajax=function(Sj){var Vj,Wj,cj,Rj,Tj=ui.extend({},Sj||{}),Uj=ui.Deferred&&ui.Deferred();for(xi in ui.ajaxSettings)void 0===Tj[xi]&&(Tj[xi]=ui.ajaxSettings[xi]);(cj=Tj).global&&0==ui.active++&&Hi(cj,null,"ajaxStart"),Tj.crossDomain||((Vj=wi.createElement("a")).href=Tj.url,Vj.href=Vj.href,Tj.crossDomain=Fi.protocol+"//"+Fi.host!=Vj.protocol+"//"+Vj.host),Tj.url||(Tj.url=window.location.toString()),-1<(Wj=Tj.url.indexOf("#"))&&(Tj.url=Tj.url.slice(0,Wj)),(Rj=Tj).processData&&Rj.data&&"string"!=ui.type(Rj.data)&&(Rj.data=ui.param(Rj.data,Rj.traditional)),!Rj.data||Rj.type&&"GET"!=Rj.type.toUpperCase()&&"jsonp"!=Rj.dataType||(Rj.url=Ri(Rj.url,Rj.data),Rj.data=void 0);var Xj=Tj.dataType,Yj=/\?.+=\?/.test(Tj.url);if(Yj&&(Xj="jsonp"),!1!==Tj.cache&&(Sj&&!0===Sj.cache||"script"!=Xj&&"jsonp"!=Xj)||(Tj.url=Ri(Tj.url,"_="+Date.now())),"jsonp"==Xj)return Yj||(Tj.url=Ri(Tj.url,Tj.jsonp?Tj.jsonp+"=?":!1===Tj.jsonp?"":"callback=?")),ui.ajaxJSONP(Tj,Uj);var dk,Zj=Tj.accepts[Xj],$j={},_j=function(t,e){$j[t.toLowerCase()]=[t,e]},ak=/^([\w-]+:)\/\//.test(Tj.url)?RegExp.$1:window.location.protocol,bk=Tj.xhr(),ck=bk.setRequestHeader;if(Uj&&Uj.promise(bk),Tj.crossDomain||_j("X-Requested-With","XMLHttpRequest"),_j("Accept",Zj||"*/*"),(Zj=Tj.mimeType||Zj)&&(-1<Zj.indexOf(",")&&(Zj=Zj.split(",",2)[0]),bk.overrideMimeType&&bk.overrideMimeType(Zj)),(Tj.contentType||!1!==Tj.contentType&&Tj.data&&"GET"!=Tj.type.toUpperCase())&&_j("Content-Type",Tj.contentType||"application/x-www-form-urlencoded"),Tj.headers)for(yi in Tj.headers)_j(yi,Tj.headers[yi]);if(bk.setRequestHeader=_j,!(bk.onreadystatechange=function(){if(4==bk.readyState){bk.onreadystatechange=Pi,clearTimeout(dk);var hk,ik=!1;if(200<=bk.status&&bk.status<300||304==bk.status||0==bk.status&&"file:"==ak){if(Xj=Xj||((Oj=Tj.mimeType||bk.getResponseHeader("content-type"))&&(Oj=Oj.split(";",2)[0]),Oj&&(Oj==Di?"html":Oj==Ci?"json":Ai.test(Oj)?"script":Bi.test(Oj)&&"xml")||"text"),"arraybuffer"==bk.responseType||"blob"==bk.responseType)hk=bk.response;else{hk=bk.responseText;try{hk=function(t,e,i){if(i.dataFilter==Pi)return t;var n=i.context;return i.dataFilter.call(n,t,e)}(hk,Xj,Tj),"script"==Xj?eval(hk):"xml"==Xj?hk=bk.responseXML:"json"==Xj&&(hk=Ei.test(hk)?null:ui.parseJSON(hk))}catch(t){ik=t}if(ik)return Mi(ik,"parsererror",bk,Tj,Uj)}Li(hk,bk,Tj,Uj)}else Mi(bk.statusText||null,bk.status?"error":"abort",bk,Tj,Uj)}var Oj})===Ki(bk,Tj))return bk.abort(),Mi(null,"abort",bk,Tj,Uj),bk;var ek=!("async"in Tj)||Tj.async;if(bk.open(Tj.type,Tj.url,ek,Tj.username,Tj.password),Tj.xhrFields)for(yi in Tj.xhrFields)bk[yi]=Tj.xhrFields[yi];for(yi in $j)ck.apply(bk,$j[yi]);return 0<Tj.timeout&&(dk=setTimeout(function(){bk.onreadystatechange=Pi,bk.abort(),Mi(null,"timeout",bk,Tj,Uj)},Tj.timeout)),bk.send(Tj.data?Tj.data:null),bk},ui.get=function(){return ui.ajax(Ti.apply(null,arguments))},ui.post=function(){var t=Ti.apply(null,arguments);return t.type="POST",ui.ajax(t)},ui.getJSON=function(){var t=Ti.apply(null,arguments);return t.dataType="json",ui.ajax(t)},ui.fn.load=function(t,e,i){if(!this.length)return this;var n,r=this,o=t.split(/\s/),s=Ti(t,e,i),a=s.success;return 1<o.length&&(s.url=o[0],n=o[1]),s.success=function(t){r.html(n?ui("<div>").html(t.replace(zi,"")).find(n):t),a&&a.apply(r,arguments)},ui.ajax(s),this};var Ui=encodeURIComponent;ui.param=function(t,e){var i=[];return i.add=function(t,e){ui.isFunction(e)&&(e=e()),null==e&&(e=""),this.push(Ui(t)+"="+Ui(e))},function i(n,t,r,o){var s,a=ui.isArray(t),h=ui.isPlainObject(t);ui.each(t,function(t,e){s=ui.type(e),o&&(t=r?o:o+"["+(h||"object"==s||"array"==s?t:"")+"]"),!o&&a?n.add(e.name,e.value):"array"==s||!r&&"object"==s?i(n,e,r,t):n.add(t,e)})}(i,t,e),i.join("&").replace(/%20/g,"+")}}(L),function(){try{getComputedStyle(void 0)}catch(t){var i=getComputedStyle;window.getComputedStyle=function(t,e){try{return i(t,e)}catch(t){return null}}}}(),function(t){function e(t,e){var i=this.os={},n=this.browser={},r=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!t.match(/\(Macintosh\; Intel /),a=t.match(/(iPad).*OS\s([\d_]+)/),h=t.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=/Win\d{2}|Windows/.test(e),d=t.match(/Windows Phone ([\d.]+)/),p=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),g=t.match(/Silk\/([\d._]+)/),_=t.match(/(BlackBerry).*Version\/([\d.]+)/),m=t.match(/(BB10).*Version\/([\d.]+)/),v=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),w=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),b=t.match(/Firefox\/([\d.]+)/),x=t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),k=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),S=!w&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=S||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!r)&&(n.version=r[1]),o&&(i.android=!0,i.version=o[2]),c&&!h&&(i.ios=i.iphone=!0,i.version=c[2].replace(/_/g,".")),a&&(i.ios=i.ipad=!0,i.version=a[2].replace(/_/g,".")),h&&(i.ios=i.ipod=!0,i.version=h[3]?h[3].replace(/_/g,"."):null),d&&(i.wp=!0,i.version=d[1]),u&&(i.webos=!0,i.version=u[2]),p&&(i.touchpad=!0),_&&(i.blackberry=!0,i.version=_[2]),m&&(i.bb10=!0,i.version=m[2]),v&&(i.rimtabletos=!0,i.version=v[2]),y&&(n.playbook=!0),f&&(i.kindle=!0,i.version=f[1]),g&&(n.silk=!0,n.version=g[1]),!g&&i.android&&t.match(/Kindle Fire/)&&(n.silk=!0),w&&(n.chrome=!0,n.version=w[1]),b&&(n.firefox=!0,n.version=b[1]),x&&(i.firefoxos=!0,i.version=x[1]),k&&(n.ie=!0,n.version=k[1]),T&&(s||i.ios||l)&&(n.safari=!0,i.ios||(n.version=T[1])),S&&(n.webview=!0),i.tablet=!!(a||y||o&&!t.match(/Mobile/)||b&&t.match(/Tablet/)||k&&!t.match(/Phone/)&&t.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(o||c||u||_||m||w&&t.match(/Android/)||w&&t.match(/CriOS\/([\d.]+)/)||b&&t.match(/Mobile/)||k&&t.match(/Touch/)))}e.call(t,navigator.userAgent,navigator.platform),t.__detect=e}(L),function(p,f){var i,g,_,m,v,y,w,b,x,k,n="",r=document.createElement("div"),S=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,T={};function t(t){return i?i+t:t.toLowerCase()}r.style.transform===f&&p.each({Webkit:"webkit",Moz:"",O:"o"},function(t,e){if(r.style[t+"TransitionProperty"]!==f)return n="-"+t.toLowerCase()+"-",i=e,!1}),g=n+"transform",T[_=n+"transition-property"]=T[m=n+"transition-duration"]=T[y=n+"transition-delay"]=T[v=n+"transition-timing-function"]=T[w=n+"animation-name"]=T[b=n+"animation-duration"]=T[k=n+"animation-delay"]=T[x=n+"animation-timing-function"]="",p.fx={off:i===f&&r.style.transitionProperty===f,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:t("TransitionEnd"),animationEnd:t("AnimationEnd")},p.fn.animate=function(t,e,i,n,r){return p.isFunction(e)&&(n=e,e=i=f),p.isFunction(i)&&(n=i,i=f),p.isPlainObject(e)&&(i=e.easing,n=e.complete,r=e.delay,e=e.duration),e&&(e=("number"==typeof e?e:p.fx.speeds[e]||p.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(t,e,i,n,r)},p.fn.anim=function(t,e,i,n,r){var o,s,a,h={},c="",u=this,l=p.fx.transitionEnd,d=!1;if(e===f&&(e=p.fx.speeds._default/1e3),r===f&&(r=0),p.fx.off&&(e=0),"string"==typeof t)h[w]=t,h[b]=e+"s",h[k]=r+"s",h[x]=i||"linear",l=p.fx.animationEnd;else{for(o in s=[],t)S.test(o)?c+=o+"("+t[o]+") ":(h[o]=t[o],s.push(o.replace(/([A-Z])/g,"-$1").toLowerCase()));c&&(h[g]=c,s.push(g)),0<e&&"object"==typeof t&&(h[_]=s.join(", "),h[m]=e+"s",h[y]=r+"s",h[v]=i||"linear")}return a=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;p(t.target).unbind(l,a)}else p(this).unbind(l,a);d=!0,p(this).css(T),n&&n.call(this)},0<e&&(this.bind(l,a),setTimeout(function(){d||a.call(u)},1e3*(e+r)+25)),this.size()&&this.get(0).clientLeft,this.css(h),e<=0&&setTimeout(function(){u.each(function(){a.call(this)})},0),this},r=null}(L),function(s,a){window.document.documentElement;var n=s.fn.show,r=s.fn.hide,t=s.fn.toggle;function o(t,e,i,n,r){"function"!=typeof e||r||(r=e,e=a);var o={opacity:i};return n&&(o.scale=n,t.css(s.fx.cssPrefix+"transform-origin","0 0")),t.animate(o,e,null,r)}function i(t,e,i,n){return o(t,e,0,i,function(){r.call(s(this)),n&&n.call(this)})}s.fn.show=function(t,e){return n.call(this),t===a?t=0:this.css("opacity",0),o(this,t,1,"1,1",e)},s.fn.hide=function(t,e){return t===a?r.call(this):i(this,t,"0,0",e)},s.fn.toggle=function(e,i){return e===a||"boolean"==typeof e?t.call(this,e):this.each(function(){var t=s(this);t["none"==t.css("display")?"show":"hide"](e,i)})},s.fn.fadeTo=function(t,e,i){return o(this,t,e,null,i)},s.fn.fadeIn=function(t,e){var i=this.css("opacity");return 0<i?this.css("opacity",0):i=1,n.call(this).fadeTo(t,i,e)},s.fn.fadeOut=function(t,e){return i(this,t,null,e)},s.fn.fadeToggle=function(e,i){return this.each(function(){var t=s(this);t[0==t.css("opacity")||"none"==t.css("display")?"fadeIn":"fadeOut"](e,i)})}}(L),this.$=L,this.$body=this.$(this.window.document).find("body");var M=function(){var m=2147483647,v=36,y=1,w=26,r=38,o=700,b=72,x=128,k="-",s=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=v-y,S=Math.floor,T=String.fromCharCode;function C(t){throw new RangeError(e[t])}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function j(t,e,i){var n=0;for(t=i?S(t/o):t>>1,t+=S(t/e);h*w>>1<t;n+=v)t=S(t/h);return S(n+(h+1)*t/(t+r))}return{version:"1.4.0 / cropped",encode:function(t){return i=function(t){return s.test(t)?"xn--"+function(t){var e,i,n,r,o,s,a,h,c,u,l,d,p,f,g,_=[];for(d=(t=function(t){for(var e,i,n=[],r=0,o=t.length;r<o;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}(t)).length,e=x,o=b,s=i=0;s<d;++s)(l=t[s])<128&&_.push(T(l));for(n=r=_.length,r&&_.push(k);n<d;){for(a=m,s=0;s<d;++s)e<=(l=t[s])&&l<a&&(a=l);for(a-e>S((m-i)/(p=n+1))&&C("overflow"),i+=(a-e)*p,e=a,s=0;s<d;++s)if((l=t[s])<e&&++i>m&&C("overflow"),l==e){for(h=i,c=v;!(h<(u=c<=o?y:o+w<=c?w:c-o));c+=v)g=h-u,f=v-u,_.push(T(A(u+g%f,0))),h=S(g/f);_.push(T(A(h,0))),o=j(i,p,n==r),i=0,++n}++i,++e}return _.join("")}(t):t},n=(e=t).split("@"),r="",1<n.length&&(r=n[0]+"@",e=n[1]),r+function(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}((e=e.replace(a,".")).split("."),i).join(".");var e,i,n,r}}}(),N=function o(s,a,h){function c(i,t){if(!a[i]){if(!s[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={exports:{}};s[i][0].call(r.exports,function(t){var e=s[i][1][t];return c(e||t)},r,r.exports,o,s,a,h)}return a[i].exports}for(var u="function"==typeof require&&require,t=0;t<h.length;t++)c(h[t]);return c}({1:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(e=n=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),e=r=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],2:[function(t,e,i){"use strict";var h=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var c=new h.Buf8(256),n=0;n<256;n++)c[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}c[254]=c[254]=1,i.string2buf=function(t){var e,i,n,r,o,s=t.length,a=0;for(r=0;r<s;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),a+=i<128?1:i<2048?2:i<65536?3:4;for(e=new h.Buf8(a),r=o=0;o<a;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),i<128?e[o++]=i:(i<2048?e[o++]=192|i>>>6:(i<65536?e[o++]=224|i>>>12:(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63),e[o++]=128|i>>>6&63),e[o++]=128|63&i);return e},i.buf2binstring=function(t){return u(t,t.length)},i.binstring2buf=function(t){for(var e=new h.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,r,o,s=e||t.length,a=new Array(2*s);for(i=n=0;i<s;)if((r=t[i++])<128)a[n++]=r;else if(4<(o=c[r]))a[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&i<s;)r=r<<6|63&t[i++],o--;1<o?a[n++]=65533:r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|1023&r)}return u(a,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+c[t[i]]>e?i:e}},{"./common":1}],3:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;r=r+e[n++]|0,o=o+r|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},{}],4:[function(t,e,i){"use strict";var a=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,n){var r=a,o=n+i;t^=-1;for(var s=n;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}},{}],5:[function(t,e,i){"use strict";var c,d=t("../utils/common"),u=t("./trees"),p=t("./adler32"),f=t("./crc32"),n=t("./messages"),l=0,g=4,_=0,m=-2,h=-1,v=4,r=2,y=8,w=9,o=286,s=30,a=19,b=2*o+1,x=15,k=3,S=258,T=S+k+1,C=42,A=113,j=1,E=2,I=3,M=4;function R(t,e){return t.msg=n[e],e}function P(t){return(t<<1)-(4<t?9:0)}function z(t){for(var e=t.length;0<=--e;)t[e]=0}function D(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(d.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function O(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,D(t.strm)}function N(t,e){t.pending_buf[t.pending++]=e}function $(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-T?t.strstart-(t.w_size-T):0,c=t.window,u=t.w_mask,l=t.prev,d=t.strstart+S,p=c[o+s-1],f=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(i=e)+s]===f&&c[i+s-1]===p&&c[i]===c[o]&&c[++i]===c[o+1]){o+=2,i++;do{}while(c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&o<d);if(n=S-(d-o),o=d-S,s<n){if(t.match_start=e,a<=(s=n))break;p=c[o+s-1],f=c[o+s]}}}while((e=l[e&u])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead}function W(t){var e,i,n,r,o,s,a,h,c,u,l=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=l+(l-T)){for(d.arraySet(t.window,t.window,l,l,0),t.match_start-=l,t.strstart-=l,t.block_start-=l,i=t.hash_size,e=i;n=t.head[--e],t.head[e]=l<=n?n-l:0,--i;);for(e=i=l;n=t.prev[--e],t.prev[e]=l<=n?n-l:0,--i;);r+=l}if(0===t.strm.avail_in)break;if(s=t.strm,a=t.window,h=t.strstart+t.lookahead,c=r,u=void 0,u=s.avail_in,c<u&&(u=c),i=0===u?0:(s.avail_in-=u,d.arraySet(a,s.input,s.next_in,u,h),1===s.state.wrap?s.adler=p(s.adler,a,u,h):2===s.state.wrap&&(s.adler=f(s.adler,a,u,h)),s.next_in+=u,s.total_in+=u,u),t.lookahead+=i,t.lookahead+t.insert>=k)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+k-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<k)););}while(t.lookahead<T&&0!==t.strm.avail_in)}function U(t,e){for(var i,n;;){if(t.lookahead<T){if(W(t),t.lookahead<T&&e===l)return j;if(0===t.lookahead)break}if(i=0,t.lookahead>=k&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-T&&(t.match_length=L(t,i)),t.match_length>=k)if(n=u._tr_tally(t,t.strstart-t.match_start,t.match_length-k),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=k){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(O(t,!1),0===t.strm.avail_out))return j}return t.insert=t.strstart<k-1?t.strstart:k-1,e===g?(O(t,!0),0===t.strm.avail_out?I:M):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?j:E}function B(t,e){for(var i,n,r;;){if(t.lookahead<T){if(W(t),t.lookahead<T&&e===l)return j;if(0===t.lookahead)break}if(i=0,t.lookahead>=k&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=k-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-T&&(t.match_length=L(t,i),t.match_length<=5&&(1===t.strategy||t.match_length===k&&4096<t.strstart-t.match_start)&&(t.match_length=k-1)),t.prev_length>=k&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-k,n=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-k),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+k-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=k-1,t.strstart++,n&&(O(t,!1),0===t.strm.avail_out))return j}else if(t.match_available){if((n=u._tr_tally(t,0,t.window[t.strstart-1]))&&O(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return j}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<k-1?t.strstart:k-1,e===g?(O(t,!0),0===t.strm.avail_out?I:M):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?j:E}function F(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*b),this.dyn_dtree=new d.Buf16(2*(2*s+1)),this.bl_tree=new d.Buf16(2*(2*a+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(x+1),this.heap=new d.Buf16(2*o+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*o+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=r,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:A,t.adler=2===e.wrap?0:1,e.last_flush=l,u._tr_init(e),_):R(t,m)}function q(t){var e,i=H(t);return i===_&&((e=t.state).window_size=2*e.w_size,z(e.head),e.max_lazy_match=c[e.level].max_lazy,e.good_match=c[e.level].good_length,e.nice_match=c[e.level].nice_length,e.max_chain_length=c[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=k-1,e.match_available=0,e.ins_h=0),i}function J(t,e,i,n,r,o){if(!t)return m;var s=1;if(e===h&&(e=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),r<1||w<r||i!==y||n<8||15<n||e<0||9<e||o<0||v<o)return R(t,m);8===n&&(n=9);var a=new V;return(t.state=a).strm=t,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+k-1)/k),a.window=new d.Buf8(2*a.w_size),a.head=new d.Buf16(a.hash_size),a.prev=new d.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new d.Buf8(a.pending_buf_size),a.d_buf=a.lit_bufsize>>1,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=i,q(t)}c=[new F(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(W(t),0===t.lookahead&&e===l)return j;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,O(t,!1),0===t.strm.avail_out))return j;if(t.strstart-t.block_start>=t.w_size-T&&(O(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===g?(O(t,!0),0===t.strm.avail_out?I:M):(t.strstart>t.block_start&&(O(t,!1),t.strm.avail_out),j)}),new F(4,4,8,4,U),new F(4,5,16,8,U),new F(4,6,32,32,U),new F(4,4,16,16,B),new F(8,16,32,32,B),new F(8,16,128,128,B),new F(8,32,128,256,B),new F(32,128,258,1024,B),new F(32,258,258,4096,B)],i.deflateInit=function(t,e){return J(t,e,y,15,8,0)},i.deflateInit2=J,i.deflateReset=q,i.deflateResetKeep=H,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?m:(t.state.gzhead=e,_):m},i.deflate=function(t,e){var i,n,r,o;if(!t||!t.state||5<e||e<0)return t?R(t,m):m;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&e!==g)return R(t,0===t.avail_out?-5:m);if(n.strm=t,i=n.last_flush,n.last_flush=e,n.status===C)if(2===n.wrap)t.adler=0,N(n,31),N(n,139),N(n,8),n.gzhead?(N(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),N(n,255&n.gzhead.time),N(n,n.gzhead.time>>8&255),N(n,n.gzhead.time>>16&255),N(n,n.gzhead.time>>24&255),N(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),N(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(N(n,255&n.gzhead.extra.length),N(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=f(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(N(n,0),N(n,0),N(n,0),N(n,0),N(n,0),N(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),N(n,3),n.status=A);else{var s=y+(n.w_bits-8<<4)<<8,a=-1;a=2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3,s|=a<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=A,$(n,s),0!==n.strstart&&($(n,t.adler>>>16),$(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),D(t),r=n.pending,n.pending!==n.pending_buf_size));)N(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),D(t),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,N(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),D(t),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,N(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>r&&(t.adler=f(t.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&D(t),n.pending+2<=n.pending_buf_size&&(N(n,255&t.adler),N(n,t.adler>>8&255),t.adler=0,n.status=A)):n.status=A),0!==n.pending){if(D(t),0===t.avail_out)return n.last_flush=-1,_}else if(0===t.avail_in&&P(e)<=P(i)&&e!==g)return R(t,-5);if(666===n.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==n.lookahead||e!==l&&666!==n.status){var h=2===n.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(W(t),0===t.lookahead)){if(e===l)return j;break}if(t.match_length=0,i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(O(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===g?(O(t,!0),0===t.strm.avail_out?I:M):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?j:E}(n,e):3===n.strategy?function(t,e){for(var i,n,r,o,s=t.window;;){if(t.lookahead<=S){if(W(t),t.lookahead<=S&&e===l)return j;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=k&&0<t.strstart&&(r=t.strstart-1,(n=s[r])===s[++r]&&n===s[++r]&&n===s[++r])){o=t.strstart+S;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<o);t.match_length=S-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=k?(i=u._tr_tally(t,1,t.match_length-k),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(O(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===g?(O(t,!0),0===t.strm.avail_out?I:M):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?j:E}(n,e):c[n.level].func(n,e);if(h!==I&&h!==M||(n.status=666),h===j||h===I)return 0===t.avail_out&&(n.last_flush=-1),_;if(h===E&&(1===e?u._tr_align(n):5!==e&&(u._tr_stored_block(n,0,0,!1),3===e&&(z(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),D(t),0===t.avail_out))return n.last_flush=-1,_}return e!==g?_:n.wrap<=0?1:(2===n.wrap?(N(n,255&t.adler),N(n,t.adler>>8&255),N(n,t.adler>>16&255),N(n,t.adler>>24&255),N(n,255&t.total_in),N(n,t.total_in>>8&255),N(n,t.total_in>>16&255),N(n,t.total_in>>24&255)):($(n,t.adler>>>16),$(n,65535&t.adler)),D(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?_:1)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&103!==e&&e!==A&&666!==e?R(t,m):(t.state=null,e===A?R(t,-3):_):m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(t,e,i){"use strict";var h=t("../utils/common"),a=0,c=1;function n(t){for(var e=t.length;0<=--e;)t[e]=0}var u=0,s=29,l=256,d=l+1+s,p=30,f=19,_=2*d+1,m=15,r=16,g=7,v=256,y=16,w=17,b=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(d+2));n(C);var A=new Array(2*p);n(A);var j=new Array(512);n(j);var E=new Array(256);n(E);var I=new Array(s);n(I);var M,R,P,z=new Array(p);function D(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function O(t){return t<256?j[t]:j[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function $(t,e,i){t.bi_valid>r-i?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>r-t.bi_valid,t.bi_valid+=i-r):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function L(t,e,i){$(t,i[2*e],i[2*e+1])}function W(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function U(t,e,i){var n,r,o=new Array(m+1),s=0;for(n=1;n<=m;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=W(o[a]++,a))}}function B(t){var e;for(e=0;e<d;e++)t.dyn_ltree[2*e]=0;for(e=0;e<p;e++)t.dyn_dtree[2*e]=0;for(e=0;e<f;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*v]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function F(t){8<t.bi_valid?N(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function V(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function H(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&V(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!V(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function q(t,e,i){var n,r,o,s,a=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===n?L(t,r,e):(o=E[r],L(t,o+l+1,e),0!==(s=x[o])&&(r-=I[o],$(t,r,s)),o=O(--n),L(t,o,i),0!==(s=k[o])&&(n-=z[o],$(t,n,s))),a<t.last_lit;);L(t,v,e)}function J(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=_,i=0;i<h;i++)0!==o[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=c<2?++c:0,o[2*r]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=c,i=t.heap_len>>1;1<=i;i--)H(t,o,i);for(r=h;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,o,s,a,h=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,l=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,g=0;for(o=0;o<=m;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<_;i++)n=t.heap[i],o=h[2*h[2*n+1]+1]+1,f<o&&(o=f,g++),h[2*n+1]=o,c<n||(t.bl_count[o]++,s=0,p<=n&&(s=d[n-p]),a=h[2*n],t.opt_len+=a*(o+s),l&&(t.static_len+=a*(u[2*n+1]+s)));if(0!==g){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,g-=2}while(0<g);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)r=t.heap[--i],c<r||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),n--)}}(t,e),U(o,c,t.bl_count)}function Z(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,c=4;for(0===s&&(h=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<h&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*y]++):a<=10?t.bl_tree[2*w]++:t.bl_tree[2*b]++,o=r,(a=0)===s?(h=138,c=3):r===s?(h=6,c=3):(h=7,c=4))}function Y(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,c=4;for(0===s&&(h=138,c=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<h&&r===s)){if(a<c)for(;L(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(L(t,r,t.bl_tree),a--),L(t,y,t.bl_tree),$(t,a-3,2)):a<=10?(L(t,w,t.bl_tree),$(t,a-3,3)):(L(t,b,t.bl_tree),$(t,a-11,7));o=r,(a=0)===s?(h=138,c=3):r===s?(h=6,c=3):(h=7,c=4)}}n(z);var G=!1;function X(t,e,i,n){var r,o,s,a;$(t,(u<<1)+(n?1:0),3),o=e,s=i,a=!0,F(r=t),a&&(N(r,s),N(r,~s)),h.arraySet(r.pending_buf,r.window,o,s,r.pending),r.pending+=s}i._tr_init=function(t){G||(function(){var t,e,i,n,r,o=new Array(m+1);for(n=i=0;n<s-1;n++)for(I[n]=i,t=0;t<1<<x[n];t++)E[i++]=n;for(E[i-1]=n,n=r=0;n<16;n++)for(z[n]=r,t=0;t<1<<k[n];t++)j[r++]=n;for(r>>=7;n<p;n++)for(z[n]=r<<7,t=0;t<1<<k[n]-7;t++)j[256+r++]=n;for(e=0;e<=m;e++)o[e]=0;for(t=0;t<=143;)C[2*t+1]=8,t++,o[8]++;for(;t<=255;)C[2*t+1]=9,t++,o[9]++;for(;t<=279;)C[2*t+1]=7,t++,o[7]++;for(;t<=287;)C[2*t+1]=8,t++,o[8]++;for(U(C,d+1,o),t=0;t<p;t++)A[2*t+1]=5,A[2*t]=W(t,5);M=new D(C,x,l+1,d,m),R=new D(A,k,0,p,m),P=new D(new Array(0),S,0,f,g)}(),G=!0),t.l_desc=new o(t.dyn_ltree,M),t.d_desc=new o(t.dyn_dtree,R),t.bl_desc=new o(t.bl_tree,P),t.bi_buf=0,t.bi_valid=0,B(t)},i._tr_stored_block=X,i._tr_flush_block=function(t,e,i,n){var r,o,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return a;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return c;for(e=32;e<l;e++)if(0!==t.dyn_ltree[2*e])return c;return a}(t)),J(t,t.l_desc),J(t,t.d_desc),s=function(t){var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),J(t,t.bl_desc),e=f-1;3<=e&&0===t.bl_tree[2*T[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==e?X(t,e,i,n):4===t.strategy||o===r?($(t,2+(n?1:0),3),q(t,C,A)):($(t,4+(n?1:0),3),function(t,e,i,n){var r;for($(t,e-257,5),$(t,i-1,5),$(t,n-4,4),r=0;r<n;r++)$(t,t.bl_tree[2*T[r]+1],3);Y(t,t.dyn_ltree,e-1),Y(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),B(t),n&&F(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(E[i]+l+1)]++,t.dyn_dtree[2*O(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){var e;$(t,2,3),L(t,v,C),16===(e=t).bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":1}],8:[function(t,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(t,e,i){"use strict";var s=t("./zlib/deflate"),a=t("./utils/common"),h=t("./utils/strings"),n=t("./zlib/messages"),r=t("./zlib/zstream"),c=Object.prototype.toString,u=0,o=-1,l=0,d=8;function p(t){if(!(this instanceof p))return new p(t);this.options=a.assign({level:o,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==u)throw new Error(n[i]);e.header&&s.deflateSetHeader(this.strm,e.header)}function f(t,e){var i=new p(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}p.prototype.push=function(t,e){var i,n,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=h.string2buf(t):"[object ArrayBuffer]"===c.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),1!==(i=s.deflate(r,n))&&i!==u)return this.onEnd(i),!(this.ended=!0);0!==r.avail_out&&(0!==r.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(h.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((0<r.avail_in||0===r.avail_out)&&1!==i);return 4===n?(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u):2!==n||(this.onEnd(u),!(r.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=p,i.deflate=f,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js"),O=function(){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t.charAt(i)]=i;return e}(n),s=String.fromCharCode,e=function(t){var e;return t.length<2?(e=t.charCodeAt(0))<128?t:e<2048?s(192|e>>>6)+s(128|63&e):s(224|e>>>12&15)+s(128|e>>>6&63)+s(128|63&e):(e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320),s(240|e>>>18&7)+s(128|e>>>12&63)+s(128|e>>>6&63)+s(128|63&e))},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,r=function(t){return t.replace(i,e)},a=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[n.charAt(i>>>18),n.charAt(i>>>12&63),2<=e?"=":n.charAt(i>>>6&63),1<=e?"=":n.charAt(63&i)].join("")},h=function(t){return t.replace(/[\s\S]{1,3}/g,a)},c=function(t,e){return e?h(r(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):h(r(t))},u=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),l=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return s(55296+(e>>>10))+s(56320+(1023&e));case 3:return s((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return s((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},d=function(t){return t.replace(u,l)},p=function(t){var e=t.length,i=e%4,n=(0<e?o[t.charAt(0)]<<18:0)|(1<e?o[t.charAt(1)]<<12:0)|(2<e?o[t.charAt(2)]<<6:0)|(3<e?o[t.charAt(3)]:0),r=[s(n>>>16),s(n>>>8&255),s(255&n)];return r.length-=[0,0,2,1][i],r.join("")},f=function(t){return t.replace(/[\s\S]{1,4}/g,p)};return{VERSION:"2.1.1",atob:f,btoa:h,utob:r,encode:c,encodeURI:function(t){return c(t,!0)},btou:d,decode:function(t){return d(f(t.replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")))}}}();function P(){}P.prototype.base64Encode=function(t){return O.encode(t)},P.prototype.btoa=function(t){return O.btoa(t)},P.prototype.atob=function(t){return O.atob(t)},P.prototype.base64EncodeUri=function(t){return O.encodeURI(t)},P.prototype.base64Decode=function(t){return O.decode(t)},P.prototype.gzip=function(t,e){return N.gzip(t,{to:"string"})},P.prototype.punyCode=function(t){return M.encode(t)},P.prototype.clone=function(t){return JSON.parse(JSON.stringify(t))},P.prototype.getConfig=function(t,e){e=e||{};var i={};for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?"object"!=typeof t[n]||Array.isArray(t[n])?i[n]=this.clone(e[n]):i[n]=this.getConfig(t[n],e[n]):i[n]=this.clone(t[n]));return i},this.tools=new P,this.config=E||{};var Q=this.tools.getConfig({logLevel:"warning",testCookieName:"check"},this.config);function R(t,e){this.ULTRA=50,this.DEBUG=100,this.INFO=200,this.NOTICE=250,this.WARNING=300,this.ERROR=400,this.CRITICAL=500,this.ALERT=550,this.EMERGENCY=600,this._levels={50:"ULTRA",100:"DEBUG",200:"INFO",250:"NOTICE",300:"WARNING",400:"ERROR",500:"CRITICAL",550:"ALERT",600:"EMERGENCY"},this._level=void 0===t?this.WARNING:this.getLevelByName(t),this._startTime=e||+new Date,this._buffer=[],this._useBuffer=!0}function S(t,e){this._manager=t,this._channel=e}function T(t,e,i){this._logger=t.getLogger("cookies"),this._document=e.document,this._testCookieName=i||"check"}function U(t){this._logger=t.getLogger("events"),this._subscribers={}}function V(t,e,i){if("string"!=typeof t)throw"name must be a string";if(t.length<1)throw"empty name";if(this._name=t,"function"!=typeof e)throw"callback must be a function";if(this._callback=e,void 0===i)i=0;else{if(isNaN(i))throw"priority must be a number";i=Math.round(i)}this._priority=i}function W(t,e){this._name=t,this.data="object"==typeof e?e:{},this._isPropagating=!0,this._result=!1}R.prototype._log=function(t,e){t<this.INFO?console.debug(e):t<this.NOTICE?console.log(e):t<this.WARNING?console.info(e):t<this.ERROR?console.warn(e):console.error(e)},R.prototype.getLevelName=function(t){if(isNaN(t)||void 0===this._levels[t])throw new Error('LeozaLoggerManager: Unknown level "'+t+'"');return this._levels[t]},R.prototype.getLevelByName=function(t){if(t=t.toUpperCase(),!this.hasOwnProperty(t))throw new Error('LeozaLoggerManager: Unknown level name "'+t+'"');return this[t]},R.prototype.setLevel=function(t){this._level=this.getLevelByName(t)},R.prototype.getLevel=function(){return this.getLevelName(this._level)},R.prototype._getTime=function(){var t=((new Date).getTime()-this._startTime)/1e3,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i,r=e.toString();r.length<2&&(r="0"+r);var o=i.toString();o.length<2&&(o="0"+o);var s=n.toFixed(3);return s.length<6&&(s="0"+s),r+":"+o+":"+s},R.prototype.log=function(t,e,i){var n=this.getLevelByName(t),r="["+this._getTime()+"] "+e+"."+t.toUpperCase()+": "+i;this._useBuffer?this._buffer.push([n,r]):n>=this._level&&this._log(n,r)},R.prototype.flush=function(){if(this._useBuffer){for(var t in this._buffer)if(this._buffer.hasOwnProperty(t)){var e=this._buffer[t].shift(),i=this._buffer[t].shift();e>=this._level&&this._log(e,i)}this._useBuffer=!1,this._buffer=[]}},R.prototype.getLogger=function(t){return new S(this,t)},S.prototype.log=function(t,e){this._manager.log(t,this._channel,e)},S.prototype.ultra=function(t){this.log("ULTRA",t)},S.prototype.debug=function(t){this.log("DEBUG",t)},S.prototype.info=function(t){this.log("INFO",t)},S.prototype.notice=function(t){this.log("NOTICE",t)},S.prototype.warning=function(t){this.log("WARNING",t)},S.prototype.error=function(t){this.log("ERROR",t)},S.prototype.critical=function(t){this.log("CRITICAL",t)},S.prototype.alert=function(t){this.log("ALERT",t)},S.prototype.emergency=function(t){this.log("EMERGENCY",t)},this.loggerManager=new R(Q.logLevel,F),T.prototype._log=function(t,e){e?this._logger.ultra(t):this._logger.debug(t)},T.prototype.set=function(t,e,i,n){var r=new Date;n=!!n,void 0===e?(r.setFullYear(1978),this._document.cookie=t+"="+encodeURI(e)+";expires="+r.toGMTString()+";path=/",this._log("var "+t+" deleted",n)):!isNaN(i)&&0<i?(i=Math.round(i),r=new Date(+r+1e3*i),this._document.cookie=t+"="+encodeURI(e)+";expires="+r.toGMTString()+";path=/",this._log("set: "+t+" = "+e+" [on "+i+" seconds]",n)):(this._document.cookie=t+"="+encodeURI(e)+";path=/",this._log("set: "+t+" = "+e+" [session]",n))},T.prototype.del=function(t){this.set(t),this._logger.debug("del: "+t)},T.prototype.get=function(t){var e=("; "+this._document.cookie).split("; "+t+"=");if(2===e.length){var i=decodeURIComponent(e.pop().split(";").shift());return this._logger.debug("get: "+t+" = "+i),i}},T.prototype.test=function(){var t=this._testCookieName,e=Math.round(899*Math.random()+100)+"-data";return this.set(t,e),this.get(t)===e&&(this.del(t),!0)},this.cookiesManager=new T(this.loggerManager,this.window,Q.testCookieName),U.prototype.subscribe=function(t,e,i,n){if("string"!=typeof t||!t)return this._logger.warning("Unable to subscribe on event: bad event name provided"),!1;t=t.toLowerCase();try{var r=new V(e,i,n)}catch(t){return this._logger.warning("Unable to subscribe on event: "+t),!1}return t in this._subscribers||(this._subscribers[t]=[]),this._subscribers[t].push(r),this._logger.debug('New subscriber "'+r.getName()+'" on "'+t+'" event registered [priority: '+r.getPriority()+"]"),!0},U.prototype.dispatch=function(t,e){if("string"!=typeof t||!t)throw this._logger.warning("Unable to dispatch event: bad event name provided"),new Error;t=t.toLowerCase(),this._logger.debug('Dispatching event "'+t+'"');var i=new W(t,e||{});if(!(t in this._subscribers))return this._logger.debug('no subscribers on "'+t+'" event'),i;var n=this._subscribers[t];for(var r in n.sort(function(t,e){return t.getPriority()==e.getPriority()?0:t.getPriority()>e.getPriority()?-1:1}),n)if(n.hasOwnProperty(r)){var o=n[r];if(this._logger.debug("dispatching: "+o.getName()+" [priority: "+o.getPriority()+"]"),o.dispatch(i),!i.canPropagate)return i}return i},V.prototype.getName=function(){return this._name},V.prototype.getPriority=function(){return this._priority},V.prototype.dispatch=function(t){this._callback.call(null,t)},W.prototype.getName=function(){return this._name},W.prototype.stopPropagation=function(){this._isPropagating=!1},W.prototype.canPropagate=function(){return this._isPropagating},W.prototype.setAsDone=function(){this._result=!0},W.prototype.setAsFailed=function(){this._result=!1},W.prototype.getResult=function(){return this._result},this.eventManager=new U(this.loggerManager)}function c(t,e,i,n,r,o){this.container=t,this.logger=this.container.getLogger("client"),this.storage=e,this.config=this.container.getConfig({publicApiUrl:"https://tracker.cartprotector.com/",ajaxTimeout:7e3,retryAfter:100,triesCount:3,maxBadResponsesCount:3,minPingInterval:5e3,maxPingInterval:75e3,pingIntervalMultiplier:1.75}),this.id=i,this.env=new f(this.container,this.storage),o&&this.env.envStorage.getStaff().setShowToolbar(1),this.request=new q(this.id,this.env),this.runaway=new s(t),this.presenter=new p(t,e,n),this.collector=new d(t),this.toolbar=new z(this),this.canShowWidgets=!!r,this.showToolbar=this.env.envStorage.getStaff().getShowToolbar(),this.isWidgetContactsSent=!1,this.init()}function d(t){this.container=t}function e(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setResult(e.r||0).setEmail(e.e||"").setName(e.n||"").setPhone(e.p||"").setComments(e.c||"").setIsShowed(e.s||"")}function f(t,e){this.container=t,this.storage=e,this.config=this.container.getConfig({saveEvery:2e3}),this.logger=this.container.getLogger("env"),this.envStorage=this.storage.getEnvStorage(),this.envStorage.getSummary().getVisitsCount()?(this.envSession=this.storage.getEnvSession(),this.envSession.getVisit().getPagesCount()||(this.envSession=new j,this.envStorage.getSummary().incVisitsCount())):(this.envStorage=new k,this.envSession=new j,this.envStorage.getSummary().incVisitsCount()),this._lastUpdateAt=this.container.getTimeMs(),this._wasSaved=!1,this.changePage();var i=this;this.container.eventManager.subscribe("env_update","env",function(t){i.update(t)}),this.isWidgetAlreadyLoaded=!1}function g(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setVisitsCount(e.v||0).setPagesCount(e.p||0).setWidgetsCount(e.w||0).setDuration(e.d||0).setUrl(e.u||"")}function h(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setLastWidgetShowAt(e.l||0).setOfferAcceptStatus(e.s||0)}function i(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setShowToolbar(e.t||0)}function j(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setVisit(e.v||{}).setPage(e.p||{})}function k(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setSummary(e.s||{}).setRelations(e.r||{}).setStaff(e.a||{})}function l(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setTrackerId(e.t||0).setAccountId(e.a||0).setVisitorId(e.v||"")}function m(t,e){this.container=t,this.logger=this.container.getLogger("identifier"),this.storage=e,this.config=this.container.getConfig({ajaxTimeout:7e3,idUrl:"https://tracker.cartprotector.com/id",iframeUrl:"https://tracker.cartprotector.com/if",iframeOrigin:"https://tracker.cartprotector.com",iframeTimeout:5e3}),this.init()}function n(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setCommand(e.c||"").setParameters(e.p||{})}function o(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setTitle(e.t||"").setHeadCode(e.h||"").setBodyCode(e.b||"").setSelectorsCode(e.s||{})}function p(t,e,i){this.container=t,this.logger=this.container.getLogger("presenter"),this.storage=e,this.lastEmail=i||"",this.init()}function q(t,e){this.id=t,this.env=e}function r(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setInstructions(e.i||[])}function s(t){this.container=t,this.logger=this.container.getLogger("runaway"),this.config=this.container.tools.getConfig({dangerZone:.02,activateAfter:500,maxPoints:10,precision:1e3},this.container.config),this.init()}function t(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setTitle(e.t||0).setHeadCode(e.h||0).setBodyCode(e.b||0).setSelectorsCode(e.s||[])}function u(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setWidgetCode(e.c||"").setTimeoutDelay(e.t||0).setRunawayDelay(e.r||0).setTime(e.i||0)}function v(e){if("string"==typeof(e=e||{}))try{e=JSON.parse(e)}catch(t){e={}}this.setDuration(e.t||0).setReason(e.r||"")}function w(t){this.container=t,this.config=this.container.getConfig({cookiesTTL:315576e3,sessionTTL:900})}function x(t,e,i,n){this.isStarted=!1,this.showToolbar=!1,this.container=new b(t,e,n),this.logger=this.container.getLogger("app"),this.logger.info("Starting CARTPROTECTOR tracking");try{"#cpd"===this.container.window.top.location.hash?(this.container.loggerManager.setLevel("debug"),this.logger.debug("Log level changed to DEBUG")):"#cpt"===this.container.window.top.location.hash&&(this.container.loggerManager.setLevel("debug"),this.logger.debug("Log level changed to DEBUG"),this.showToolbar=!0)}catch(t){}this.container.loggerManager.flush(),this.storage=new w(this.container),this.id=new l,this.identifier=new m(this.container,this.storage),this.logger.debug("Waiting for DOM ready");var r=this;this.container.$(function(){try{r.init(i)?(r.start(),r.logger.info("Started")):r.logger.info("Stopped")}catch(t){r.logger.critical("Exception: "+t)}})}function y(t,e,i){this.container=t,this.logger=this.container.getLogger("widget"),this.state=0,this.wasShowed=!1,this.init(e,i||"")}function z(t){this.client=t,this.container=t.container,this.logger=this.container.getLogger("presenter"),this.isShowed=!1,this.id=null,this.prefix="",this.bindEventHandlers()}b.prototype.getLogger=function(t){return this.loggerManager.getLogger(t)},b.prototype.getTimeMs=function(){return this.time.getMs()},b.prototype.getTimeS=function(){return this.time.getS()},b.prototype.getConfig=function(t){return this.tools.getConfig(t,this.config)},c.prototype.init=function(){this.pingTimer=null,this.pingInterval=0,this.pingsSent=0,this.badResponsesCount=0,this.bindEventHandlers()},c.prototype.subscribe=function(t,e,i){var n=this;return this.container.eventManager.subscribe(t,"client",function(t){n[e](t)},i),this},c.prototype.bindEventHandlers=function(){this.subscribe("client_start","start").subscribe("client_stop","stop").subscribe("client_response","onResponse").subscribe("client_ping","ping").subscribe("instruction.stop","onStopTrackingInstruction").subscribe("instruction.send","onSendPageDataInstruction").subscribe("instruction.show","onShowWidgetInstruction").subscribe("widget_show","onWidgetShow",-8).subscribe("widget_result","onWidgetResult")},c.prototype.start=function(t){this.env.start(),this.showToolbar&&this.container.eventManager.dispatch("toolbar_show"),this.container.eventManager.dispatch("client_ping"),this.logger.debug("started"),t.setAsDone()},c.prototype.stop=function(t){this.container.eventManager.dispatch("presenter_stop"),this.stopPingTimer(),this.showToolbar&&this.container.eventManager.dispatch("toolbar_hide"),this.env.stop(),this.logger.debug("stopped"),t.setAsDone()},c.prototype.makeRequest=function(e,i,n){this.stopPingTimer(),i=i||0,n=n||!1,i++,this.pingsSent++,this.logger.debug("Making request [no: "+this.pingsSent+"; try: "+i+"]...");var o=this;this.container.$.ajax({type:"POST",url:this.config.publicApiUrl,data:JSON.stringify(e),dataType:"json",context:this.container.window,crossDomain:!0,timeout:this.config.ajaxTimeout,error:function(){if(i>=o.config.triesCount)return o.logger.warning("Request failed."),o.badResponsesCount++,o.badResponsesCount>=o.config.maxBadResponsesCount?o.logger.error("Max bad responses count reached. Stopping"):o.logger.error("Unable to get response. Stopping..."),o.container.eventManager.dispatch("stop");o.container.window.setTimeout(function(){o.logger.notice("Retrying to make request..."),o.makeRequest(e,i,n)},o.config.retryAfter)},success:function(t){o.scheduleNextPing(n),o.container.eventManager.dispatch("client_response",{requestData:e,response:new r(t),tries:i})}})},c.prototype.onResponse=function(t){var e=this;t.data.response.getInstructions().forEach(function(t){t.getCommand()&&e.container.eventManager.dispatch("instruction."+t.getCommand(),t.getParameters())}),t.setAsDone()},c.prototype.onStopTrackingInstruction=function(t){var e=new v(t.data);this.logger.debug("Stop tracking instruction received [reason: "+e.getReason()+"]"),this.storage.setIsStopped(e.getDuration()),this.canShowWidgets=!1,this.container.eventManager.dispatch("stop"),t.setAsDone()},c.prototype.onShowWidgetInstruction=function(t){if(this.logger.debug("Show widget instruction received"),this.canShowWidgets||(this.logger.debug("Showing widgets on this page is restricted, skipping instruction"),t.setAsDone()),!this.presenter.setWidgetInstruction(new u(t.data)))return this.logger.error("Unable to process show widget instruction"),t.setAsFailed();this.env.widgetLoaded(),t.setAsDone()},c.prototype.onWidgetShow=function(t){if(t.getResult()){var i=this.presenter.getLastShowAt();if(!i)return this.logger.error("Unable to get last show time"),t.setAsFailed();this.env.widgetShowed(i),this.logger.debug("Widget showed");var n=new e;n.setIsShowed(1);var r=this.request.exportContacts(n);this.makeRequest(r,0,!0),t.setAsDone()}},c.prototype.onWidgetResult=function(t){var e=t.data.contacts;if(!e.isAsked())return t.setAsFailed();if(e.isAccepted()?(this.logger.debug("Widget accepted: contacts received"),this.env.widgetAccepted()):(this.logger.debug("Widget declined"),this.env.widgetDeclined()),!this.isWidgetContactsSent){var i=this.request.exportContacts(e);this.makeRequest(i,0,!0),this.isWidgetContactsSent=!0,this.logger.debug("Widget contacts sent")}t.setAsDone()},c.prototype.onSendPageDataInstruction=function(e){this.logger.debug("Send page data instruction received");var i=this.collector.collect(new t(e.data)),n=this.request.exportPageData(i);this.makeRequest(n,0,!0),e.setAsDone()},c.prototype.stopPingTimer=function(){this.pingTimer&&this.container.window.clearTimeout(this.pingTimer)},c.prototype.scheduleNextPing=function(t){t=t||!1,this.stopPingTimer(),t||(this.pingInterval=Math.round(this.pingInterval*this.config.pingIntervalMultiplier),this.pingInterval<this.config.minPingInterval&&(this.pingInterval=this.config.minPingInterval),this.pingInterval>this.config.maxPingInterval&&(this.pingInterval=this.config.maxPingInterval));var e=this;this.pingTimer=this.container.window.setTimeout(function(){e.container.eventManager.dispatch("client_ping")},this.pingInterval),this.logger.debug("Next ping scheduled in "+this.pingInterval+"ms")},c.prototype.ping=function(t){this.logger.debug("Ping"),this.makeRequest(this.request.export()),t.setAsDone()},d.prototype.collect=function(t){var e=this.container.$,i=this.container.window.document,n=e(i),r=new o;t.getTitle()&&r.setTitle(i.title),t.getHeadCode()&&r.setHeadCode(n.find("head").html()),t.getBodyCode()&&r.setBodyCode(n.find("body").html());var s=t.getSelectorsCode();for(var a in s)if(s.hasOwnProperty(a)){var h=s[a],c=n.find(h).html();void 0!==c&&r.addSelectorCode(h,c)}return r},e.prototype.export=function(){var t={};return this.getIsShowed()&&(t.s=this._isShowed),this.isAsked()&&(t.r=this._result,this.isAccepted()&&(this._email&&(t.e=this._email),this._name&&(t.n=this._name),this._phone&&(t.p=this._phone),this._comments&&(t.c=this._comments))),t},e.prototype.setResult=function(t){return t=parseInt(t||0),this._result=0<=t&&t<=2?t:0,this},e.prototype.setAsAccepted=function(){return this._result=1,this},e.prototype.setAsDeclined=function(){return this._result=2,this},e.prototype.isAsked=function(){return 0<this._result},e.prototype.isAccepted=function(){return 1===this._result},e.prototype.isDeclined=function(){return 2===this._result},e.prototype.setEmail=function(t){return this._email=t||"",this},e.prototype.getEmail=function(){return this._email},e.prototype.setName=function(t){return this._name=t||"",this},e.prototype.getName=function(){return this._name},e.prototype.setPhone=function(t){return this._phone=t||"",this},e.prototype.getPhone=function(){return this._phone},e.prototype.setComments=function(t){return this._comments=t||"",this},e.prototype.getComments=function(){return this._comments},e.prototype.setIsShowed=function(t){return this._isShowed=t?1:0,this},e.prototype.getIsShowed=function(){return this._isShowed},f.prototype.export=function(){var t={s:this.envStorage.getSummary().export(),v:this.envSession.getVisit().export(),p:this.envSession.getPage().export(),r:this.envStorage.getRelations().export()};return this.isWidgetAlreadyLoaded&&(t.w=1),t},f.prototype.update=function(){var t=this.container.getTimeMs(),e=Math.round((t-this._lastUpdateAt)/1e3);(0<e||!this._wasSaved)&&(0<e&&(this.envStorage.getSummary().incDuration(e),this.envSession.getVisit().incDuration(e),this.envSession.getPage().incDuration(e),this._lastUpdateAt=t),this.storage.setEnvStorage(this.envStorage),this.storage.setEnvSession(this.envSession),this._wasSaved=!0,this.logger.debug("updated"))},f.prototype.changePage=function(){this.envSession.getPage().getUrl()&&this.update();var t=this.container.window.location.href;this.envSession.getPage().getUrl()!=t&&(this.envStorage.getSummary().incPagesCount(),this.envSession.getVisit().incPagesCount(),this.envSession.getPage().reset().setUrl(this.container.window.location.href),this._wasSaved=!1,this.logger.debug('page changed to "'+t+'"'),this.update())},f.prototype.widgetLoaded=function(){this.isWidgetAlreadyLoaded=!0},f.prototype.widgetShowed=function(t){this.envStorage.getSummary().incWidgetsCount(),this.envStorage.getRelations().setLastWidgetShowAt(t),this.envSession.getVisit().incWidgetsCount(),this.envSession.getPage().incWidgetsCount(),this.isWidgetAlreadyLoaded=!1,this.logger.debug("widget show registered"),this._wasSaved=!1,this.update()},f.prototype.widgetAccepted=function(){this.envStorage.getRelations().setAsAccepted(),this.logger.debug("widget accept registered"),this._wasSaved=!1,this.update()},f.prototype.widgetDeclined=function(){this.envStorage.getRelations().setAsDeclined(),this.logger.debug("widget decline registered"),this._wasSaved=!1,this.update()},f.prototype.start=function(){if(this.timer)this.logger.notice("unable to start auto saving: already started");else{var t=this;this.timer=this.container.window.setInterval(function(){t.container.eventManager.dispatch("env_update")},this.config.saveEvery),this.logger.debug("auto saving started with interval "+this.config.saveEvery+" ms")}},f.prototype.stop=function(){this.timer?(this.logger.debug("auto saving stopped"),this.container.window.clearInterval(this.timer),this.timer=null):this.logger.notice("unable to stop auto saving: already stopped")},g.prototype.export=function(){var t={};return 0<this._visitsCount&&(t.v=this._visitsCount),0<this._pagesCount&&(t.p=this._pagesCount),0<this._widgetsCount&&(t.w=this._widgetsCount),0<this._duration&&(t.d=this._duration),this._url&&(t.u=this._url),t},g.prototype.exportJSON=function(){return JSON.stringify(this.export())},g.prototype.reset=function(){return this._visitsCount=0,this._pagesCount=0,this._widgetsCount=0,this._duration=0,this._url="",this},g.prototype._get=function(t){return 0<(t=parseInt(t||0))?t:0},g.prototype.setVisitsCount=function(t){return this._visitsCount=this._get(t||0),this},g.prototype.getVisitsCount=function(){return this._visitsCount},g.prototype.incVisitsCount=function(){return this._visitsCount++,this},g.prototype.setPagesCount=function(t){return this._pagesCount=this._get(t||0),this},g.prototype.getPagesCount=function(){return this._pagesCount},g.prototype.incPagesCount=function(){return this._pagesCount++,this},g.prototype.setWidgetsCount=function(t){return this._widgetsCount=this._get(t||0),this},g.prototype.getWidgetsCount=function(){return this._widgetsCount},g.prototype.incWidgetsCount=function(){return this._widgetsCount++,this},g.prototype.setDuration=function(t){return this._duration=this._get(t||0),this},g.prototype.incDuration=function(t){return this._duration+=t,this},g.prototype.getDuration=function(){return this._duration},g.prototype.setUrl=function(t){return this._url=t||"",this},g.prototype.getUrl=function(){return this._url},h.prototype.export=function(){var t={};return 0<this._lastWidgetShowAt&&(t.l=this._lastWidgetShowAt),0<this._offerAcceptStatus&&(t.s=this._offerAcceptStatus),t},h.prototype.exportJSON=function(){return JSON.stringify(this.export())},h.prototype._get=function(t){return 0<(t=parseInt(t||0))?t:0},h.prototype.setLastWidgetShowAt=function(t){return this._lastWidgetShowAt=this._get(t||0),this},h.prototype.getLastWidgetShowAt=function(){return this._lastWidgetShowAt},h.prototype.setOfferAcceptStatus=function(t){return this._offerAcceptStatus=this._get(t||0),this},h.prototype.getOfferAcceptStatus=function(){return this._offerAcceptStatus},h.prototype.setAsAccepted=function(){return this.setOfferAcceptStatus(1)},h.prototype.setAsDeclined=function(){return this.setOfferAcceptStatus(2)},i.prototype.export=function(){var t={};return 0<this._showToolbar&&(t.t=this._showToolbar),t},i.prototype.exportJSON=function(){return JSON.stringify(this.export())},i.prototype._get=function(t){return 0<(t=parseInt(t||0))?t:0},i.prototype.setShowToolbar=function(t){return this._showToolbar=this._get(t||0),this},i.prototype.getShowToolbar=function(){return this._showToolbar},j.prototype.export=function(){return{v:this.getVisit().export(),p:this.getPage().export()}},j.prototype.exportJSON=function(){return JSON.stringify(this.export())},j.prototype.setVisit=function(t){return this._visit=new g(t),this},j.prototype.getVisit=function(){return this._visit},j.prototype.setPage=function(t){return this._page=new g(t),this},j.prototype.getPage=function(){return this._page},k.prototype.export=function(){return{s:this.getSummary().export(),r:this.getRelations().export(!0),a:this.getStaff().export()}},k.prototype.exportJSON=function(){return JSON.stringify(this.export())},k.prototype.setSummary=function(t){return this._summary=new g(t),this},k.prototype.getSummary=function(){return this._summary},k.prototype.setRelations=function(t){return this._relations=new h(t),this},k.prototype.getRelations=function(){return this._relations},k.prototype.setStaff=function(t){return this._staff=new i(t),this},k.prototype.getStaff=function(){return this._staff},l.prototype.export=function(){var t={};return 0<this._trackerId&&(t.t=this._trackerId),0<this._accountId&&(t.a=this._accountId),this._visitorId&&(t.v=this._visitorId),t},l.prototype.setTrackerId=function(t){return t=parseInt(t||0),this._trackerId=0<t?t:0,this},l.prototype.getTrackerId=function(){return this._trackerId},l.prototype.setAccountId=function(t){return t=parseInt(t||0),this._accountId=0<t?t:0,this},l.prototype.getAccountId=function(){return this._accountId},l.prototype.setVisitorId=function(t){return this._visitorId=t||"",this},l.prototype.getVisitorId=function(){return this._visitorId},m.prototype.init=function(){this.isIframeLoaded=!1,this.iframeWaitTimer=0,this.isLocal=!1,this.iframeWindow=null,this.isStarted=!1,this.bindEventHandlers(),this.logger.debug("initialized")},m.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"identifier",function(t){i[e](t)}),this},m.prototype.bindEventHandlers=function(){this.subscribe("identifier_start","start").subscribe("identifier_stop","stop").subscribe("identifier_email","saveEmail").subscribe("identifier_iframe_message","onIframeMessage").subscribe("identifier_iframe_timeout","onIframeTimeout")},m.prototype.notDetected=function(){this.isStarted&&(this.logger.debug("Visitor id not detected"),this.container.eventManager.dispatch("identifier_fail"))},m.prototype.detected=function(t,e,i){if(this.isStarted){if(!(t=t||""))return this.logger.error("Empty visitor id provided to identifier detected"),this.notDetected();i=i||"unknown",this.logger.debug("Visitor identified as "+t+" by "+i),this.isLocal||this.storage.setVisitorId(t),this.container.eventManager.dispatch("identifier_success",{id:t,email:e||""})}},m.prototype.start=function(t){if(this.isStarted)t.setAsFailed();else{this.logger.debug("start"),this.isStarted=!0;var e=this.storage.getVisitorId();e?(this.isLocal=!0,this.detected(e,"","local cookies")):this.startIframeIdentification(),t.setAsDone()}},m.prototype.stop=function(t){this.isStarted?(this.logger.debug("stop"),this.iframeWaitTimer&&this.container.window.clearTimeout(this.iframeWaitTimer),this.isIframeLoaded&&this.unloadIframe(),this.isStarted=!1,t.setAsDone()):t.setAsFailed()},m.prototype.startIframeIdentification=function(){this.logger.debug("Starting iframe identification");var e=this;this.container.$(this.container.window).on("message",function(t){(t.originalEvent||t).origin==e.config.iframeOrigin&&e.container.eventManager.dispatch("identifier_iframe_message",{event:t})}),this.iframeWaitTimer=this.container.window.setTimeout(function(){e.container.eventManager.dispatch("identifier_iframe_timeout")},this.config.iframeTimeout),this.loadIframe()},m.prototype.getIframeCode=function(){var t=this.container.window.location.protocol+"//"+this.container.tools.punyCode(this.container.window.location.host);return'<iframe id="_cp_iframe" name="_cp_iframe" src="'+this.config.iframeUrl+"?parent="+t+'" frameborder="no" scrolling="0" style="position:fixed;width:1px;height:1px;bottom:0;right:0;display:none;"></iframe>'},m.prototype.loadIframe=function(){this.isIframeLoaded||(this.container.$body.append(this.getIframeCode()),this.isIframeLoaded=!0,this.logger.debug("Iframe loaded"))},m.prototype.unloadIframe=function(){this.isIframeLoaded&&(this.container.$body.find("#_cp_iframe").remove(),this.isIframeLoaded=!1,this.logger.debug("Iframe unloaded"))},m.prototype.onIframeTimeout=function(t){this.logger.notice("Iframe identification timeout"),this.processLocalIdentification(),t.setAsDone()},m.prototype.onIframeMessage=function(t){if(this.logger.debug("Iframe message caught."),!t.data.hasOwnProperty("event"))return t.setAsFailed(),this.logger.error("Unable to process iframe message. Stopping..."),this.container.eventManager.dispatch("stop");this.iframeWaitTimer&&(this.container.window.clearTimeout(this.iframeWaitTimer),this.logger.debug("Iframe wait timer disabled"));var e=t.data.event.originalEvent||t.data.event;this.iframeWindow=e.source;var i=this.container.tools.getConfig({v:"",e:""},JSON.parse(e.data));i.v?this.detected(i.v,i.e,"iframe identification"):(this.logger.notice("Iframe message error"),this.processLocalIdentification()),t.setAsDone()},m.prototype.processLocalIdentification=function(){this.logger.debug("Making local identification"),this.unloadIframe();var e=this;this.container.$.ajax({type:"GET",url:this.config.idUrl,dataType:"json",context:this.container.window,crossDomain:!0,timeout:this.config.ajaxTimeout,error:function(){e.notDetected()},success:function(t){(t=e.container.tools.getConfig({v:"",e:""},t)).v?(e.storage.setVisitorId(t.v),e.isLocal=!0,e.detected(t.v,t.e,"local identification")):e.notDetected()}})},m.prototype.saveEmail=function(t){if(!this.isLocal&&this.isIframeLoaded){var e=t.data.email||"";e&&(this.logger.debug("Sending email to iframe"),this.iframeWindow.postMessage(e,this.config.iframeOrigin))}},n.prototype.export=function(){return{c:this._command,p:this._parameters}},n.prototype.setCommand=function(t){return this._command=t||"",this},n.prototype.getCommand=function(){return this._command},n.prototype.setParameters=function(t){return this._parameters=t||{},this},n.prototype.getParameters=function(){return this._parameters},o.prototype.export=function(){var t={};return this._title&&(t.t=this._title),this._headCode&&(t.h=this._headCode),this._bodyCode&&(t.b=this._bodyCode),t.s=this._selectorsCode,t},o.prototype.setTitle=function(t){return this._title=t||"",this},o.prototype.getTitle=function(){return this._title},o.prototype.setHeadCode=function(t){return this._headCode=t||"",this},o.prototype.getHeadCode=function(){return this._headCode},o.prototype.setBodyCode=function(t){return this._bodyCode=t||"",this},o.prototype.getBodyCode=function(){return this._bodyCode},o.prototype.setSelectorsCode=function(t){return this._selectorsCode=t||{},this},o.prototype.getSelectorsCode=function(){return this._selectorsCode},o.prototype.addSelectorCode=function(t,e){return this._selectorsCode[t]=e,this},p.prototype.init=function(){this.widget=null,this.minRunawayTimeMs=0,this.timeoutTimer=0,this.lastShowAt=0,this.newLastShowAt=0,this.instructionGotAt=0,this.bindEventHandlers(),this.logger.debug("initialized")},p.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"presenter",function(t){i[e](t)}),this},p.prototype.bindEventHandlers=function(){this.subscribe("presenter_stop","stop").subscribe("runaway","onRunaway").subscribe("presenter_timeout","onTimeout").subscribe("presenter_show","show")},p.prototype.wasShowed=function(){return!!this.widget&&this.widget.wasShowed},p.prototype.stop=function(t){if(this.widget&&(this.timeoutTimer&&this.container.window.clearTimeout(this.timeoutTimer),this.minRunawayTimeMs=0,!this.container.eventManager.dispatch("widget_remove").getResult()))return this.logger.error("Unable to stop: unable to remove previous widget"),t.setAsFailed();this.widget=null,t.setAsDone()},p.prototype.setWidgetInstruction=function(t){var e;if(!this.container.eventManager.dispatch("presenter_stop").getResult())return this.logger.error("Unable to create widget: unable to stop"),!1;if(this.widget=new y(this.container,t.getWidgetCode(),this.lastEmail),this.minRunawayTimeMs=1e3*t.getRunawayDelay(),0<this.minRunawayTimeMs&&((e=this.minRunawayTimeMs-this.container.getTimeMs())<0&&(e=0),this.logger.debug("Showing widget at runaway will activate in "+e+" ms")),0<t.getTimeoutDelay())if(e=1e3*t.getTimeoutDelay()-this.container.getTimeMs(),this.logger.debug("Showing widget with runaway "),0<e){var i=this;this.timeoutTimer=this.container.window.setTimeout(function(){i.container.eventManager.dispatch("presenter_timeout")},e),this.logger.debug("Widget will show in "+e+" ms")}else this.container.eventManager.dispatch("presenter_timeout");return this.instructionGotAt=this.container.getTimeS(),this.newLastShowAt=t.getTime(),this.logger.debug("New widget created"),!0},p.prototype.onRunaway=function(t){if(this.minRunawayTimeMs&&this.widget&&!(this.minRunawayTimeMs>this.container.getTimeMs())){if(this.logger.debug("Runaway event caught"),this.wasShowed())this.logger.debug("Showing canceled: already showed");else if(!this.container.eventManager.dispatch("presenter_show",{by:"runaway"}).getResult())return this.logger.error("Unable to process runaway: unable to show"),t.setAsFailed();t.setAsDone()}},p.prototype.onTimeout=function(t){if(this.logger.debug("Timeout event caught"),this.wasShowed())this.logger.debug("Showing canceled: already showed");else if(!this.container.eventManager.dispatch("presenter_show",{by:"timeout"}).getResult())return this.logger.error("Unable to process timeout: unable to show"),t.setAsFailed();t.setAsDone()},p.prototype.show=function(t){if(!this.widget)return this.logger.error("Unable to show: widget not initialized"),t.setAsFailed();if(this.wasShowed())return this.logger.error("Unable to show: already showed"),t.setAsFailed();if(this.logger.debug("Showing widget"),this.lastShowAt=this.newLastShowAt+this.container.getTimeS()-this.instructionGotAt,this.logger.debug("Last show changed to "+this.lastShowAt),!this.container.eventManager.dispatch("widget_show").getResult())return this.logger.error("Unable to show: unable to show widget"),t.setAsFailed();var e=t.data.by||"unknown";this.logger.debug("Showed (event: "+e+")"),t.setAsDone()},p.prototype.getLastShowAt=function(){return this.lastShowAt},q.prototype.export=function(){return{i:this.id.export(),e:this.env.export()}},q.prototype.exportPageData=function(t){var e=this.export();return e.d=t.export(),e},q.prototype.exportContacts=function(t){var e=this.export();return e.c=t.export(),e},r.prototype.export=function(){var t={},e=this._instructions.length;if(0<e){t.i=[];for(var i=0;i<e;i++)t.i.push(this._instructions[i].export())}return t},r.prototype.setInstructions=function(t){if(this._instructions=[],Array.isArray(t)){var e=t.length;if(0<e)for(var i=0;i<e;i++)this._instructions.push(new n(t[i]))}return this},r.prototype.getInstructions=function(){return this._instructions},s.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"runaway",function(t){i[e](t)}),this},s.prototype.bindEventHandlers=function(){this.subscribe("window_resize","onWindowResize").subscribe("window_mouse_move","onMouseMove").subscribe("window_mouse_leave","onMouseLeave")},s.prototype.init=function(){this.timer=0,this.isVectorDanger=!1,this.points=[];this.$window=this.container.$(this.container.window),this.bindEventHandlers(),this.onWindowResize(),this.logger.debug("listener initialized")},s.prototype.deactivate=function(){this.timer&&(this.container.window.clearTimeout(this.timer),this.timer=0,this.logger.debug("timer deactivated"))},s.prototype.activate=function(){this.deactivate();var t=this;this.timer=this.container.window.setTimeout(function(){t.logger.debug("new event"),t.timer=0,t.container.eventManager.dispatch("runaway")},this.config.activateAfter),this.logger.debug("timer activated [delay "+this.config.activateAfter+" ms]")},s.prototype.onWindowResize=function(t){this.windowWidth=this.$window.width(),this.windowHeight=this.$window.height(),this.windowWidth<1&&(this.windowWidth=1),this.windowHeight<1&&(this.windowHeight=1),this.logger.debug("Window size changed to "+this.windowWidth+"x"+this.windowHeight)},s.prototype.onMouseMove=function(t){var e=t.data.event;this.deactivate(),this.newPoint(e.clientX,e.clientY)},s.prototype.newPoint=function(t,e){var i={x:t/this.windowWidth,y:e/this.windowHeight};this.points.push(i),this.points.length>this.config.maxPoints&&this.points.shift();var n=this.getExitPoint(this.points[0],i);this.isVectorDanger=!!n&&n.y<=this.config.dangerZone},s.prototype.getExitPoint=function(t,e){var i,n=e.x-t.x,r=e.y-t.y,o=n<0?e.x:1-e.x,s=r<0?e.y:1-e.y,a=0!=n?Math.abs(o/n):0,h=0!=r?Math.abs(s/r):0;if(!(i=a?h?a<h?a:h:a:h))return!1;var c=this.config.precision;return{x:Math.round((e.x+n*i)*c)/c,y:Math.round((e.y+r*i)*c)/c}},s.prototype.onMouseLeave=function(t){this.isVectorDanger&&this.activate()},t.prototype.export=function(){var t={};return this._title&&(t.t=1),this._headCode&&(t.h=1),this._bodyCode&&(t.b=1),this._selectorsCode.length&&(t.s=this._selectorsCode),t},t.prototype.setTitle=function(t){return t=parseInt(t||0),this._title=0<t?1:0,this},t.prototype.getTitle=function(){return this._title},t.prototype.setHeadCode=function(t){return t=parseInt(t||0),this._headCode=0<t?1:0,this},t.prototype.getHeadCode=function(){return this._headCode},t.prototype.setBodyCode=function(t){return t=parseInt(t||0),this._bodyCode=0<t?1:0,this},t.prototype.getBodyCode=function(){return this._bodyCode},t.prototype.setSelectorsCode=function(t){return t=t||[],this._selectorsCode=Array.isArray(t)?t:[],this},t.prototype.getSelectorsCode=function(){return this._selectorsCode},u.prototype.export=function(){var t={c:this._widgetCode};return 0<this._timeoutDelay&&(t.t=this._timeoutDelay),0<this._runawayDelay&&(t.r=this._runawayDelay),0<this._time&&(t.i=this._time),t},u.prototype.setWidgetCode=function(t){return this._widgetCode=t||"",this},u.prototype.getWidgetCode=function(){return this._widgetCode},u.prototype.setTimeoutDelay=function(t){return t=parseInt(t||0),this._timeoutDelay=0<t?t:0,this},u.prototype.getTimeoutDelay=function(){return this._timeoutDelay},u.prototype.setRunawayDelay=function(t){return t=parseInt(t||0),this._runawayDelay=0<t?t:0,this},u.prototype.getRunawayDelay=function(){return this._runawayDelay},u.prototype.setTime=function(t){return t=parseInt(t||0),this._time=0<t?t:0,this},u.prototype.getTime=function(){return this._time},v.prototype.export=function(){var t={};return 0<this._duration&&(t.t=this._duration),this._reason&&(t.r=this._reason),t},v.prototype.setDuration=function(t){return t=parseInt(t||0),this._duration=0<t?t:0,this},v.prototype.getDuration=function(){return this._duration},v.prototype.setReason=function(t){return this._reason=t||"",this},v.prototype.getReason=function(){return this._reason},w.prototype.getEnvStorage=function(){return new k(this.container.cookiesManager.get("_cp_a"))},w.prototype.setEnvStorage=function(t){this.container.cookiesManager.set("_cp_a",t.exportJSON(),this.config.cookiesTTL,1)},w.prototype.getEnvSession=function(){return new j(this.container.cookiesManager.get("_cp_b"))},w.prototype.setEnvSession=function(t){this.container.cookiesManager.set("_cp_b",t.exportJSON(),this.config.sessionTTL,1)},w.prototype.getIsStopped=function(){return this.container.cookiesManager.get("_cp_s")||0},w.prototype.setIsStopped=function(t){0<(t=t||0)?this.container.cookiesManager.set("_cp_s",1,t):this.container.cookiesManager.del("_cp_s")},w.prototype.setIsStoppedInThisSession=function(){this.container.cookiesManager.set("_cp_s",1)},w.prototype.getVisitorId=function(){return this.container.cookiesManager.get("_cp_v")||""},w.prototype.setVisitorId=function(t){(t=t||"")?this.container.cookiesManager.set("_cp_v",t,this.config.cookiesTTL):this.container.cookiesManager.del("_cp_v")},x.prototype.init=function(t){if(t.hasOwnProperty("trackerId")&&0<t.trackerId)this.id.setTrackerId(t.trackerId),this.logger.info("Tracker id is "+this.id.getTrackerId());else{if(!(t.hasOwnProperty("accountId")&&0<t.accountId))throw"no id information provided";this.id.setAccountId(t.accountId),this.logger.info("Account id is "+this.id.getAccountId())}if(!this.container.cookiesManager.test())throw"cookies doesn't work";return this.logger.debug("Cookies checked"),this.storage.getIsStopped()?(this.logger.info("Stop pinging cookie set. Starting canceled."),!1):this.container.window.hasOwnProperty("_is_cp_started")&&this.container.window._is_cp_started?(this.logger.warning("Another copy of tracker is already started"),!1):(this.logger.debug("Double script run checked"),this.isFromYandex()?(this.logger.info("Stop: visitor came from yandex market."),this.storage.setIsStoppedInThisSession(),!1):(this.logger.debug("Referrer checked (not yandex market)"),!0))},x.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"tracker",function(t){i[e](t)}),this},x.prototype.bindEventHandlers=function(){this.subscribe("stop","onStop").subscribe("identifier_fail","onIdentifierFail").subscribe("identifier_success","onIdentifierSuccess")},x.prototype.startDispatchingWindowEvents=function(){var e=this.container.eventManager,t=this.container.window;this.container.$(t).on("resize",function(t){e.dispatch("window_resize",{event:t})}),this.container.$(t.document).on("mousemove",function(t){e.dispatch("window_mouse_move",{event:t})}).on("mouseleave",function(t){e.dispatch("window_mouse_leave",{event:t})})},x.prototype.start=function(){this.container.window._is_cp_started=!0,this.logger.debug("Global start flag set"),this.isStarted=!0,this.bindEventHandlers(),this.startDispatchingWindowEvents(),this.container.eventManager.dispatch("identifier_start")},x.prototype.isFromYandex=function(){var t=!1;try{this.container.window.top.document.referrer.match(/market\.yandex\.ru/i)&&(t=!0),this.container.window.top.document.location.href.toString().match(/frommarket.*?market\.yandex\.ru/i)&&(t=!0)}catch(t){}return t},x.prototype.checkRestrictions=function(){this.isFromYandex()&&(this.dontShowWidget=!0,this.logger.notice("Widget will not be showed on this page: visitor come from yandex market"))},x.prototype.onIdentifierFail=function(t){this.logger.error("Visitor identification failed, stopping"),t.setAsDone()},x.prototype.onIdentifierSuccess=function(t){this.logger.debug("Visitor identification done, starting client"),this.id.setVisitorId(t.data.id||"");new c(this.container,this.storage,this.id,t.data.email||"",!this.dontShowWidget,this.showToolbar);this.container.eventManager.dispatch("client_start").getResult()?(this.logger.debug("Client started"),t.setAsDone()):(this.logger.error("Unable to start client, stopping tracker"),this.container.eventManager.dispatch("identifier_stop"),t.setAsFailed())},x.prototype.onStop=function(t){this.logger.notice("Stopping client"),this.container.eventManager.dispatch("client_stop").getResult()?t.setAsDone():t.setAsFailed()},y.prototype.init=function(t,e){this.bindEventHandlers();var i=this.container.$body.append(this.unpackCode(t));this.$back=i.find("#_sa_m_bg"),this.$widget=i.find("#_sa_m_wi"),this.widgetBaseStyle=this.$widget.attr("style"),this.$thankYou=i.find("#_sa_m_ty"),this.$close=i.find("#_sa_m_cl"),this.$submit=i.find("#_sa_m_su"),this.$ok=i.find("#_sa_m_ok"),this.$email=i.find("#_sa_m_em"),this.$email.length&&e&&this.$email.val(e),this.$eula=i.find("#_sa_m_eu"),this.$eulaReq=i.find("#_sa_m_eu_req"),this.$eulaLabel=i.find("#_sa_m_eu_lab"),this.$name=i.find("#_sa_m_na"),this.$phone=i.find("#_sa_m_ph"),this.$comments=i.find("#_sa_m_co"),this.$emailError=i.find("#_sa_m_em_err"),this.$nameError=i.find("#_sa_m_na_err"),this.$phoneError=i.find("#_sa_m_ph_err"),this.bindWidgetHandlers()},y.prototype.unpackCode=function(t){return t=t.replace(/\|!/g,"!important;")},y.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"widget",function(t){i[e](t)}),this},y.prototype.bindEventHandlers=function(){this.subscribe("widget_show","show").subscribe("widget_hide","hide").subscribe("widget_switch","switchToThankYou").subscribe("widget_show_errors","showErrors").subscribe("widget_hide_errors","hideErrors").subscribe("widget_accept","accept").subscribe("widget_decline","decline").subscribe("widget_ok","ok").subscribe("widget_remove","remove").subscribe("window_resize","fixView").subscribe("widget_show","fixView").subscribe("widget_switch","fixView").subscribe("widget_show_errors","fixView").subscribe("widget_hide_errors","fixView")},y.prototype.bindWidgetHandlers=function(){var e=this.container.eventManager;this.container.$(this.container.window.document).on("keydown",function(t){if(27===(0<t.which?t.which:t.keyCode)&&this.isVisible)return e.dispatch("widget_decline",{by:"escape"}),!1}),this.$back.on("click",function(){return e.dispatch("widget_decline",{by:"background"}),!1}),this.$close.on("click",function(){return e.dispatch("widget_decline",{by:"close"}),!1}),this.$submit.on("click",function(){return e.dispatch("widget_accept",{by:"submit"}),!1});var t=function(t){if(13===(0<t.which?t.which:t.keyCode))return e.dispatch("widget_accept",{by:"return"}),!1};this.$email.on("keydown",t),this.$name.on("keydown",t),this.$phone.on("keydown",t),this.$ok.on("click",function(){return e.dispatch("widget_ok"),!1})},y.prototype.show=function(t){if(this.state)return this.logger.error("Unable to show widget: already showed"),t.setAsFailed();this.$back.show(),this.$widget.show(),this.$email.length&&this.$email.focus(),this.logger.debug("Widget showed"),this.state=1,this.wasShowed=!0,t.setAsDone()},y.prototype.hide=function(t){if(!this.state)return this.logger.error("Unable to hide widget: already hidden"),t.setAsFailed();this.$widget.hide(),1===this.state?this.$widget.hide():this.$thankYou.hide(),this.$back.hide(),this.logger.debug("Widget hidden"),this.state=0,t.setAsDone()},y.prototype.switchToThankYou=function(t){return this.state?2===this.state?(this.logger.error("Unable to switch to thank you: already switched"),t.setAsFailed()):this.$thankYou.length<1?(this.logger.error("Unable to switch to thank you: no this page"),t.setAsFailed()):(this.$widget.hide(),this.$thankYou.show(),this.state=2,void t.setAsDone()):(this.logger.error("Unable to switch to thank you: widget is hidden"),t.setAsFailed())},y.prototype.showErrors=function(t){var e=t.data,i=!1;e.getEmail()&&this.$email.length&&this.$emailError.length&&(this.$emailError.show(),this.$email.focus(),i=!0),e.getName()&&this.$name.length&&this.$nameError.length&&(this.$nameError.show(),i||(this.$name.focus(),i=!0)),e.getPhone()&&this.$phone.length&&this.$phoneError.length&&(this.$phoneError.show(),i||this.$phone.focus()),this.logger.debug("Widget errors showed"),t.setAsDone()},y.prototype.hideErrors=function(t){this.$email.length&&this.$emailError.length&&this.$emailError.hide(),this.$name.length&&this.$nameError.length&&this.$nameError.hide(),this.$phone.length&&this.$phoneError.length&&this.$phoneError.hide(),this.logger.debug("Widget errors hidden"),t.setAsDone()},y.prototype.decline=function(t){var i=t.data.by||"unknown";this.logger.debug("Widget closed by "+i);var n=new e;if(n.setAsDeclined(),!this.container.eventManager.dispatch("widget_result",{contacts:n}).getResult())return this.logger.error("Error while declining widget"),t.setAsFailed();this.container.eventManager.dispatch("widget_hide"),t.setAsDone()},y.prototype.accept=function(t){if(0<this.$eula.length&&!this.$eula.is(":checked"))return this._showEulaError(),this.logger.notice("Eula is not accepted"),t.setAsDone();var i=t.data.by||"unknown";this.logger.debug("Widget accepted by "+i),this.container.eventManager.dispatch("widget_hide_errors");var n=new e,r=new e,o=!1,s=this.$email.val().trim();if(this.isEmailValid(s)?n.setEmail(s):(o=!0,r.setEmail(!0)),this.$phone.length){var a=this.$phone.val().trim();a.length&&(this.isPhoneValid(a)?n.setPhone(a):(o=!0,r.setPhone(!0)))}if(this.$name.length){var h=this.$name.val().trim();h.length&&(this.isNameValid(h)?n.setName(h):(o=!0,r.setName(!0)))}if(this.$comments.length){var c=this.$comments.val().trim();c.length&&n.setComments(c)}return o?(this.logger.notice("Widget data has errors"),this.container.eventManager.dispatch("widget_show_errors",r),t.setAsDone()):(n.setAsAccepted(),this.container.eventManager.dispatch("widget_result",{contacts:n}).getResult()?(this.$thankYou.length?this.container.eventManager.dispatch("widget_switch"):this.container.eventManager.dispatch("widget_hide"),void t.setAsDone()):(this.logger.error("Error while accepting widget"),t.setAsFailed()))},y.prototype.ok=function(t){this.logger.debug("Widget sad thank you"),this.container.eventManager.dispatch("widget_hide"),t.setAsDone()},y.prototype.isEmailValid=function(t){return!!t.match(/@/)},y.prototype.isNameValid=function(t){return!0},y.prototype.isPhoneValid=function(t){return!0},y.prototype.remove=function(t){if((this.logger.debug("Removing widget"),this.state)&&!this.container.eventManager.dispatch("widget_hide").getResult())return this.logger.error("Unable to remove widget: unable to hide it"),t.setAsFailed();this.$thankYou.length&&this.$thankYou.remove(),this.$widget.remove(),this.$back.remove(),this.logger.debug("Widget removed"),t.setAsDone()},y.prototype.fixView=function(t){if(this.state){var e,i,n=(0,this.container.$)(this.container.window),r=n.width(),o=n.height(),s=this.$widget.height();540<r?(e=Math.round(.9*o),i=o-50):320<=r?(e=Math.round(.95*o),i=o-10):i=e=o;var a=(i<e?i:e)/s;1<a&&(a=1);var h=s*a,c=Math.round((o-h)/2);c<0&&(c=0);var u="";if(a<1)u+="-moz-transform:scale("+a+") translateY(-"+(s/a-s)/2+"px);";this.$widget.attr("style",this.widgetBaseStyle+";display:block;top: "+c+"px!important;"+u),this.$widget.animate({zoom:a},0)}else this.$widget.attr("style",this.widgetBaseStyle+";display:none")},y.prototype._showEulaError=function(){this.$eulaReq.attr("style",""),this.$eulaLabel.addClass("cpp-eula-err")},z.prototype.subscribe=function(t,e,i){var n=this;return this.container.eventManager.subscribe(t,"toolbar",function(t){n[e](t)},i||0),this},z.prototype.bindEventHandlers=function(){this.subscribe("toolbar_show","show").subscribe("toolbar_hide","hide").subscribe("env_update","update",-8)},z.prototype.getToolbarCode=function(){this.id=Math.round(900*Math.random()+100),this.prefix="_cp_toolbar"+this.id;var t="."+this.prefix+"_block{float:left;clear:none;width:auto;height:32px;padding:4px 12px;margin:0;line-height:24px;color:#ccc;font-family:Arial,sans-serif;font-size:14px;border-left:1px solid #ccc;text-decoration:none;}a."+this.prefix+"_block:hover,a."+this.prefix+"_block:active{background-color:#252525;color:#fff;}."+this.prefix+"_value{color:#8c8;font-weight:bold;margin-left:4px;}."+this.prefix+"_details{position:absolute;width:auto;background-color:#fff;border:1px solid #ccc;bottom:32px;margin-left:-13px;}."+this.prefix+"_details table{border-collapse:collapse;padding:0;margin:0;border:0;}."+this.prefix+"_details th,."+this.prefix+"_details td{padding:4px 6px;font-size:12px;background-color:#fff;border:0;margin:0;color:#333;font-weight:normal;}."+this.prefix+"_details td{font-weight:bold}",e='<div class="'+this.prefix+'_details" id="'+this.prefix+'_env_details" style="display:none"><table><tr><th colspan="2"><b>За все время</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_summary_widgets">0</td></tr><tr><th>Номер посещения</th><td id="'+this.prefix+'_env_summary_visits">0</td></tr><tr><th>Просмотрено страниц</th><td id="'+this.prefix+'_env_summary_pages">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_summary_duration">0</td></tr><tr><th colspan="2"><b>За этот визит</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_visit_widgets">0</td></tr><tr><th>Просмотрено страниц</th><td id="'+this.prefix+'_env_visit_pages">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_visit_duration">0</td></tr><tr><th colspan="2"><b>На этой странице</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_page_widgets">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_page_duration">0</td></tr></table></div>';return code='<div id="'+this.prefix+'" style="margin:0;padding:0;width:100%;height:auto;display:block;clear:both;position:relative"><style>'+t+'</style><div style="position:fixed;margin:0;padding:0;bottom:0;left:0;right:0;height:32px;width:auto;z-index:2147483647;background-color:#4A4A4A"><div class="'+this.prefix+'_block" style="border:0"><span>CART<b>PROTECTOR</b> TOOLBAR</span></div><div class="'+this.prefix+'_block"><span>Сайт</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_tracker">unknown</span></div><div class="'+this.prefix+'_block"><span>Посетитель</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_visitor">unknown</span></div><a class="'+this.prefix+'_block" id="'+this.prefix+'_env_block"><span>Визит/стр</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_env">unknown</span>'+e+'</a><a class="'+this.prefix+'_block" id="'+this.prefix+'_close" style="float:right;"><span>X</span></a></div></div>'},z.prototype.show=function(t){if(!this.isShowed){this.container.$body.append(this.getToolbarCode());var e=this;this.container.$body.find("#"+this.prefix+"_close").on("click",function(){return e.dontShow(),!1});var i=this.container.$body.find("#"+this.prefix+"_env_details"),n=!1;this.container.$body.find("#"+this.prefix+"_env_block").on("mousemove",function(){n||(i.attr("style",""),n=!0)}).on("mouseleave",function(){n&&(i.attr("style","display:none"),n=!1)}),this.container.$body.find(),this.isShowed=!0,this.logger.info("Toolbar showed, id: "+this.prefix),this.update(),t.setAsDone()}},z.prototype.hide=function(t){this.isShowed&&(this.container.$body.find("#"+this.prefix).remove(),this.logger.info("Toolbar removed"),t.setAsDone())},z.prototype.update=function(t){if(this.isShowed){var e={tracker:this.client.id.getTrackerId(),visitor:this.client.id.getVisitorId(),env:this.client.env.envStorage.getSummary().getVisitsCount()+"/"+this.client.env.envSession.getVisit().getPagesCount(),env_summary_widgets:this.client.env.envStorage.getSummary().getWidgetsCount(),env_summary_visits:this.client.env.envStorage.getSummary().getVisitsCount(),env_summary_pages:this.client.env.envStorage.getSummary().getPagesCount(),env_summary_duration:this.client.env.envStorage.getSummary().getDuration(),env_visit_widgets:this.client.env.envSession.getVisit().getWidgetsCount(),env_visit_pages:this.client.env.envSession.getVisit().getPagesCount(),env_visit_duration:this.client.env.envSession.getVisit().getDuration(),env_page_widgets:this.client.env.envSession.getPage().getWidgetsCount(),env_page_duration:this.client.env.envSession.getPage().getDuration()};for(var i in e)e.hasOwnProperty(i)&&this.container.$body.find("#"+this.prefix+"_"+i).text(e[i]);this.logger.info("Toolbar data updated")}},z.prototype.dontShow=function(){this.client.env.envStorage.getStaff().setShowToolbar(0),this.container.eventManager.dispatch("toolbar_hide")};var A=window;try{for(;A.hasOwnProperty("parent")&&A.parent.hasOwnProperty("location")&&A!==A.parent&&A.parent.location.host===A.location.host;)A=A.parent}catch(t){}var B=A.location.protocol+"//tracker.cartprotector.com";try{"#cpd"===A.top.location.hash&&(B="http://tracker.cartprotector.com:8088")}catch(t){}new x(A,{logLevel:"warning",testCookieName:"_cp_check",publicApiUrl:B+"/",idUrl:B+"/id",iframeUrl:B+"/if",iframeOrigin:B},window._cp||A._cp||{},a)}();